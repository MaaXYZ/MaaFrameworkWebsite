import{_ as t,c as o,o as a,a4 as r}from"./chunks/framework.QjAkUUnS.js";const h=JSON.parse('{"title":"Control Methods","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/2.4-ControlMethods.md","filePath":"en/docs/2.4-ControlMethods.md","lastUpdated":null}'),d={name:"en/docs/2.4-ControlMethods.md"};function s(n,e,c,i,l,p){return a(),o("div",null,[...e[0]||(e[0]=[r('<h1 id="control-methods" tabindex="-1">Control Methods <a class="header-anchor" href="#control-methods" aria-label="Permalink to &quot;Control Methods&quot;">​</a></h1><p>This document provides detailed explanations of the various Input (control) and Screencap (screenshot) methods in MaaFramework and their configurations.</p><blockquote><p><strong>Note:</strong></p><ul><li>For APIs, input/screencap uses <code>int</code> type (bitwise OR combination); for <a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a>, use <code>string</code> type (use the name directly).</li><li><a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a> only supports configuring input/screencap methods for Win32 controllers. For Adb controllers, MaaFramework automatically detects and selects the optimal method, no manual configuration required.</li></ul></blockquote><h2 id="adb" tabindex="-1">Adb <a class="header-anchor" href="#adb" aria-label="Permalink to &quot;Adb&quot;">​</a></h2><h3 id="adb-input" tabindex="-1">Adb Input <a class="header-anchor" href="#adb-input" aria-label="Permalink to &quot;Adb Input&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L227-L240" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Combine the selected methods below using <strong>bitwise OR</strong> to provide a single value. MaaFramework will try all provided methods in a fixed priority order and select the first available method.</p><p>By default, all methods except EmulatorExtras are attempted.</p><blockquote><p>Priority: EmulatorExtras &gt; Maatouch &gt; MinitouchAndAdbKey &gt; AdbShell</p></blockquote><table tabindex="0"><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>AdbShell</td><td><code>1</code></td><td>Uses adb process for control.</td></tr><tr><td>MinitouchAndAdbKey</td><td><code>2</code></td><td>Uses adb process for key control and minitouch tool for touch control.</td></tr><tr><td>Maatouch</td><td><code>4</code></td><td>Uses maatouch tool for control.</td></tr><tr><td>EmulatorExtras</td><td><code>8</code></td><td>Uses emulator-specific tools for control. Currently supported emulators: MuMu 12</td></tr></tbody></table><h3 id="adb-screencap" tabindex="-1">Adb Screencap <a class="header-anchor" href="#adb-screencap" aria-label="Permalink to &quot;Adb Screencap&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L208-L225" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Combine the selected methods below using <strong>bitwise OR</strong> to provide a single value. MaaFramework will try all provided methods and select the fastest available method.</p><p>By default, all methods except <code>RawByNetcat</code>, <code>MinicapDirect</code>, and <code>MinicapStream</code> are attempted.</p><p><code>MinicapDirect</code> and <code>MinicapStream</code> encode to jpg (lossy compression), which significantly reduces template matching effectiveness and are not recommended.</p><table tabindex="0"><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>EncodeToFileAndPull</td><td><code>1</code></td><td>Takes screenshot via built-in screencap process, encodes to png file, pulls file via adb process, reads file.</td></tr><tr><td>Encode</td><td><code>2</code></td><td>Takes screenshot via built-in screencap process, encodes to png, transfers via adb process pipe.</td></tr><tr><td>RawWithGzip</td><td><code>4</code></td><td>Takes screenshot via built-in screencap process, compresses with gzip, transfers via adb process pipe.</td></tr><tr><td>RawByNetcat</td><td><code>8</code></td><td>Takes screenshot via built-in screencap process, transfers via nc process over network.</td></tr><tr><td>MinicapDirect</td><td><code>16</code></td><td>Takes screenshot and encodes to jpg via minicap tool, transfers via adb process pipe.</td></tr><tr><td>MinicapStream</td><td><code>32</code></td><td>Takes streaming screenshots and encodes to jpg via minicap tool, transfers via adb process pipe.</td></tr><tr><td>EmulatorExtras</td><td><code>64</code></td><td>Uses emulator-specific tools for screenshots. Currently supported emulators: MuMu 12, LDPlayer 9</td></tr></tbody></table><h2 id="win32" tabindex="-1">Win32 <a class="header-anchor" href="#win32" aria-label="Permalink to &quot;Win32&quot;">​</a></h2><h3 id="win32-input" tabindex="-1">Win32 Input <a class="header-anchor" href="#win32-input" aria-label="Permalink to &quot;Win32 Input&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L252-L259" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Select one of the values below.</p><p>No default value. Client can choose one as the default.</p><p>Different programs on Win32 handle input differently, so there is no universal method.</p><table tabindex="0"><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Seize</td><td><code>1</code></td><td>Exclusive control. Uses <code>SendInput</code>/foreground focus for input; steals focus, moves system cursor, blocks user input, cannot control in background.</td></tr><tr><td>SendMessage</td><td><code>2</code></td><td>Sends <code>WM_*</code> messages directly to the window; can control in background (window can lose focus), but subject to UIPI/permission restrictions: if target is a high-integrity process (run as administrator), must run with equal or higher privileges.</td></tr><tr><td>PostMessage</td><td><code>4</code></td><td>Similar to <code>SendMessage</code> but posts asynchronously; can control in background, same UIPI/permission restrictions apply.</td></tr><tr><td>LegacyEvent</td><td><code>8</code></td><td>Legacy <code>mouse_event</code>/<code>keybd_event</code> interface; depends on foreground and system cursor, blocks user input, generally poorer compatibility, cannot control in background.</td></tr><tr><td>PostThreadMessage</td><td><code>16</code></td><td>Posts messages to the window&#39;s thread message queue; can control in background, but requires target thread to have a message loop, same UIPI/permission restrictions apply.</td></tr><tr><td>SendMessageWithCursorPos</td><td><code>32</code></td><td>Combines <code>SendMessage</code> with actual cursor movement; moves system cursor to target position via <code>SetCursorPos</code> before sending synchronous messages. Designed for games like Genshin Impact that detect actual mouse position, can control in background, same UIPI/permission restrictions apply.</td></tr><tr><td>PostMessageWithCursorPos</td><td><code>64</code></td><td>Combines <code>PostMessage</code> with actual cursor movement; moves system cursor to target position via <code>SetCursorPos</code> before sending asynchronous messages. Designed for games like Genshin Impact that detect actual mouse position, can control in background, same UIPI/permission restrictions apply.</td></tr></tbody></table><h3 id="win32-screencap" tabindex="-1">Win32 Screencap <a class="header-anchor" href="#win32-screencap" aria-label="Permalink to &quot;Win32 Screencap&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L242-L250" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Select one of the values below.</p><p>No default value. Client can choose one as the default.</p><p>Different programs on Win32 handle rendering differently, so there is no universal method.</p><table tabindex="0"><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>GDI</td><td><code>1</code></td><td>Capture via window <code>HDC</code>/<code>BitBlt</code>; may be affected by DWM/rendering path for some programs/occlusion scenarios.</td></tr><tr><td>FramePool</td><td><code>2</code></td><td>Windows Graphics Capture (<code>Direct3D11CaptureFramePool</code>); typically supports background capture for occluded windows, available on Windows 10 1903+.</td></tr><tr><td>DXGI_DesktopDup</td><td><code>4</code></td><td>Desktop duplication (full-screen output copy); does not support background window capture (will include occluded content/desktop frames only).</td></tr><tr><td>DXGI_DesktopDup_Window</td><td><code>8</code></td><td>Desktop duplication cropped to window client area; same as <code>DXGI_DesktopDup</code>, occlusion affects results.</td></tr><tr><td>PrintWindow</td><td><code>16</code></td><td>Uses `PrintWindow(PW_CLIENTONLY</td></tr><tr><td>ScreenDC</td><td><code>32</code></td><td>Captures from screen DC based on window client area rectangle; fully affected by occlusion, does not support background capture.</td></tr></tbody></table>',29)])])}const m=t(d,[["render",s]]);export{h as __pageData,m as default};
