import{_ as t,c as d,o as e,a2 as a}from"./chunks/framework.CU_Lz0Mo.js";const o=JSON.parse('{"title":"2.4 控制方式说明","description":"","frontmatter":{},"headers":[],"relativePath":"docs/2.4-ControlMethods.md","filePath":"docs/2.4-控制方式说明.md","lastUpdated":null}');const r=t({name:"docs/2.4-ControlMethods.md"},[["render",function(t,o,r,c,h,l){return e(),d("div",null,[...o[0]||(o[0]=[a('<h1 id="_2-4-控制方式说明" tabindex="-1">2.4 控制方式说明 <a class="header-anchor" href="#_2-4-控制方式说明" aria-label="Permalink to &quot;2.4 控制方式说明&quot;">​</a></h1><p>本文档详细说明 MaaFramework 中 Screencap（截图）和 Input（控制）的各种方式及其配置。</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p></p><ul><li>对于 API ，screencap/input 使用 <code>int</code> 类型（按位或组合）；对于 <a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a>，使用 <code>string</code> 类型（直接使用名称）。</li><li><a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a> 仅支持配置 Win32 控制器的 screencap/mouse/keyboard 方式。Adb 控制器的 screencap/input 使用 <code>MaaToolkitAdbDeviceFind</code> 自动检测和选择最优方式，无需手动配置。</li></ul></div><h2 id="adb" tabindex="-1">Adb <a class="header-anchor" href="#adb" aria-label="Permalink to &quot;Adb&quot;">​</a></h2><h3 id="adb-input" tabindex="-1">Adb Input <a class="header-anchor" href="#adb-input" aria-label="Permalink to &quot;Adb Input&quot;">​</a></h3><blockquote><p>参考 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L227-L240" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>将下面选择的方式 <strong>按位或</strong> 合并为一个值提供。MaaFramework 将会按照固定优先级顺序尝试所有提供的方式，选择首个可用方式。</p><p>默认尝试除 EmulatorExtras 外所有方式。</p><blockquote><p>优先级: EmulatorExtras &gt; Maatouch &gt; MinitouchAndAdbKey &gt; AdbShell</p></blockquote><table tabindex="0"><thead><tr><th>名称</th><th>API 值</th><th>速度</th><th>兼容性</th><th>说明</th></tr></thead><tbody><tr><td>AdbShell</td><td><code>1</code></td><td>慢</td><td>高</td><td></td></tr><tr><td>MinitouchAndAdbKey</td><td><code>2</code></td><td>快</td><td>中</td><td>按键仍使用 AdbShell</td></tr><tr><td>Maatouch</td><td><code>4</code></td><td>快</td><td>中</td><td></td></tr><tr><td>EmulatorExtras</td><td><code>8</code></td><td>快</td><td>低</td><td>仅支持模拟器：MuMu 12</td></tr></tbody></table><h3 id="adb-screencap" tabindex="-1">Adb Screencap <a class="header-anchor" href="#adb-screencap" aria-label="Permalink to &quot;Adb Screencap&quot;">​</a></h3><blockquote><p>参考 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L208-L225" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>将下面选择的方式 <strong>按位或</strong> 合并为一个值提供。MaaFramework 将会尝试所有提供的方式，选择最快的可用方式。</p><p>默认尝试除 <code>RawByNetcat</code>，<code>MinicapDirect</code>，<code>MinicapStream</code> 外所有方式。</p><p><code>MinicapDirect</code> 和 <code>MinicapStream</code> 由于会编码为 jpg，为有损编码，将显著降低模板匹配的效果，不建议使用。</p><table tabindex="0"><thead><tr><th>名称</th><th>API 值</th><th>速度</th><th>兼容性</th><th>编码</th><th>说明</th></tr></thead><tbody><tr><td>EncodeToFileAndPull</td><td><code>1</code></td><td>慢</td><td>高</td><td>无损</td><td></td></tr><tr><td>Encode</td><td><code>2</code></td><td>慢</td><td>高</td><td>无损</td><td></td></tr><tr><td>RawWithGzip</td><td><code>4</code></td><td>中</td><td>高</td><td>无损</td><td></td></tr><tr><td>RawByNetcat</td><td><code>8</code></td><td>快</td><td>低</td><td>无损</td><td></td></tr><tr><td>MinicapDirect</td><td><code>16</code></td><td>快</td><td>低</td><td>有损</td><td></td></tr><tr><td>MinicapStream</td><td><code>32</code></td><td>极快</td><td>低</td><td>有损</td><td></td></tr><tr><td>EmulatorExtras</td><td><code>64</code></td><td>极快</td><td>低</td><td>无损</td><td>仅支持模拟器：MuMu 12、雷电 9</td></tr></tbody></table><h2 id="win32" tabindex="-1">Win32 <a class="header-anchor" href="#win32" aria-label="Permalink to &quot;Win32&quot;">​</a></h2><h3 id="win32-input" tabindex="-1">Win32 Input <a class="header-anchor" href="#win32-input" aria-label="Permalink to &quot;Win32 Input&quot;">​</a></h3><blockquote><p>参考 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L252-L259" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>选择下面的值提供。</p><p>无默认值。Client 可以选择一个作为默认值。</p><p>Win32 下不同程序处理输入的方法不同，不存在一个通用方式。</p><table tabindex="0"><thead><tr><th>名称</th><th>API 值</th><th>兼容性</th><th>需管理员权限</th><th>抢占鼠标</th><th>支持后台</th><th>说明</th></tr></thead><tbody><tr><td>Seize</td><td><code>1</code></td><td>高</td><td>否</td><td>是</td><td>否</td><td></td></tr><tr><td>SendMessage</td><td><code>2</code></td><td>中</td><td>可能</td><td>否</td><td>是</td><td></td></tr><tr><td>PostMessage</td><td><code>4</code></td><td>中</td><td>可能</td><td>否</td><td>是</td><td></td></tr><tr><td>LegacyEvent</td><td><code>8</code></td><td>低</td><td>否</td><td>是</td><td>否</td><td></td></tr><tr><td>PostThreadMessage</td><td><code>16</code></td><td>低</td><td>可能</td><td>否</td><td>是</td><td></td></tr><tr><td>SendMessageWithCursorPos</td><td><code>32</code></td><td>中</td><td>可能</td><td>短暂</td><td>是</td><td>专为原神等检测实际鼠标位置的游戏设计</td></tr><tr><td>PostMessageWithCursorPos</td><td><code>64</code></td><td>中</td><td>可能</td><td>短暂</td><td>是</td><td>专为原神等检测实际鼠标位置的游戏设计</td></tr></tbody></table><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><ul><li>管理员权限主要取决于目标程序的权限级别，若目标程序为管理员权限，则需以管理员权限运行以保证兼容性。</li><li><code>WithCursorPos</code> 系列方式会短暂移动光标到目标位置，发送完消息后会将光标移回原位置，因此会“短暂”抢占鼠标，但不会阻止用户操作。</li></ul></div><h3 id="win32-screencap" tabindex="-1">Win32 Screencap <a class="header-anchor" href="#win32-screencap" aria-label="Permalink to &quot;Win32 Screencap&quot;">​</a></h3><blockquote><p>参考 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L242-L250" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>选择下面的值提供。</p><p>无默认值。Client 可以选择一个作为默认值。</p><p>Win32 下不同程序处理绘制的方法不同，不存在一个通用方式。</p><table tabindex="0"><thead><tr><th>名称</th><th>API 值</th><th>速度</th><th>兼容性</th><th>需管理员权限</th><th>支持后台</th><th>说明</th></tr></thead><tbody><tr><td>GDI</td><td><code>1</code></td><td>快</td><td>中</td><td>否</td><td>否</td><td></td></tr><tr><td>FramePool</td><td><code>2</code></td><td>极快</td><td>中</td><td>否</td><td>是</td><td>Windows 10 1903+ 可用</td></tr><tr><td>DXGI_DesktopDup</td><td><code>4</code></td><td>极快</td><td>低</td><td>否</td><td>否</td><td>桌面复制（全屏输出复制）</td></tr><tr><td>DXGI_DesktopDup_Window</td><td><code>8</code></td><td>极快</td><td>低</td><td>否</td><td>否</td><td>桌面复制后裁剪</td></tr><tr><td>PrintWindow</td><td><code>16</code></td><td>中</td><td>中</td><td>否</td><td>是</td><td></td></tr><tr><td>ScreenDC</td><td><code>32</code></td><td>快</td><td>高</td><td>否</td><td>否</td><td></td></tr></tbody></table><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>Windows 在窗口最小化后会停止绘制该窗口内容，所有截图方式均无法获取有效内容，请避免窗口最小化。</p></div><h2 id="playcover-macos" tabindex="-1">PlayCover (macOS) <a class="header-anchor" href="#playcover-macos" aria-label="Permalink to &quot;PlayCover (macOS)&quot;">​</a></h2><p>PlayCover 控制器用于在 macOS 上控制通过 <a href="https://github.com/hguandl/PlayCover/releases" target="_blank" rel="noopener noreferrer">fork版PlayCover</a> 运行的 iOS 应用程序。</p><h3 id="playcover-前置要求" tabindex="-1">PlayCover 前置要求 <a class="header-anchor" href="#playcover-前置要求" aria-label="Permalink to &quot;PlayCover 前置要求&quot;">​</a></h3><ol><li>在 macOS 上安装 <a href="https://github.com/hguandl/PlayCover/releases" target="_blank" rel="noopener noreferrer">fork版PlayCover</a></li><li>目标 iOS 应用需要在 PlayCover 中启用 MaaTools 功能</li></ol><h2 id="gamepad-windows" tabindex="-1">Gamepad (Windows) <a class="header-anchor" href="#gamepad-windows" aria-label="Permalink to &quot;Gamepad (Windows)&quot;">​</a></h2><p>Gamepad 控制器用于在 Windows 上模拟 Xbox 360 或 DualShock 4 手柄输入，适用于需要手柄控制的游戏。</p><h3 id="gamepad-前置要求" tabindex="-1">Gamepad 前置要求 <a class="header-anchor" href="#gamepad-前置要求" aria-label="Permalink to &quot;Gamepad 前置要求&quot;">​</a></h3><p>需要安装 <a href="https://github.com/ViGEm/ViGEmBus/releases" target="_blank" rel="noopener noreferrer">ViGEm Bus Driver</a>。</p><h3 id="手柄类型" tabindex="-1">手柄类型 <a class="header-anchor" href="#手柄类型" aria-label="Permalink to &quot;手柄类型&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>API 值</th><th>说明</th></tr></thead><tbody><tr><td>Xbox360</td><td><code>0</code></td><td>Microsoft Xbox 360 Controller (有线)</td></tr><tr><td>DualShock4</td><td><code>1</code></td><td>Sony DualShock 4 Controller (有线)</td></tr></tbody></table><h3 id="操作映射" tabindex="-1">操作映射 <a class="header-anchor" href="#操作映射" aria-label="Permalink to &quot;操作映射&quot;">​</a></h3><p>Gamepad 控制器使用以下映射方式：</p><h4 id="数字按键-click-key-key-down-key-up" tabindex="-1">数字按键 (click_key/key_down/key_up) <a class="header-anchor" href="#数字按键-click-key-key-down-key-up" aria-label="Permalink to &quot;数字按键 (click_key/key_down/key_up)&quot;">​</a></h4><p>使用 <code>MaaGamepadButton_*</code> 常量作为按键值。Xbox 按键值用于 Xbox360 手柄，DS4 面板按键自动映射到 Xbox 等效按键：</p><table tabindex="0"><thead><tr><th>按键</th><th>API 值</th><th>Xbox 360</th><th>DualShock 4 等效</th></tr></thead><tbody><tr><td>DPAD_UP</td><td><code>1</code></td><td>十字键 上</td><td>十字键 上</td></tr><tr><td>DPAD_DOWN</td><td><code>2</code></td><td>十字键 下</td><td>十字键 下</td></tr><tr><td>DPAD_LEFT</td><td><code>4</code></td><td>十字键 左</td><td>十字键 左</td></tr><tr><td>DPAD_RIGHT</td><td><code>8</code></td><td>十字键 右</td><td>十字键 右</td></tr><tr><td>START / OPTIONS</td><td><code>16</code></td><td>Start</td><td>Options</td></tr><tr><td>BACK / SHARE</td><td><code>32</code></td><td>Back</td><td>Share</td></tr><tr><td>LEFT_THUMB / L3</td><td><code>64</code></td><td>左摇杆按下</td><td>L3</td></tr><tr><td>RIGHT_THUMB / R3</td><td><code>128</code></td><td>右摇杆按下</td><td>R3</td></tr><tr><td>LB / L1</td><td><code>256</code></td><td>LB</td><td>L1</td></tr><tr><td>RB / R1</td><td><code>512</code></td><td>RB</td><td>R1</td></tr><tr><td>GUIDE</td><td><code>1024</code></td><td>Xbox Guide</td><td>-</td></tr><tr><td>A / CROSS</td><td><code>4096</code></td><td>A</td><td>✗ (Cross)</td></tr><tr><td>B / CIRCLE</td><td><code>8192</code></td><td>B</td><td>○ (Circle)</td></tr><tr><td>X / SQUARE</td><td><code>16384</code></td><td>X</td><td>□ (Square)</td></tr><tr><td>Y / TRIANGLE</td><td><code>32768</code></td><td>Y</td><td>△ (Triangle)</td></tr><tr><td>PS</td><td><code>65536</code></td><td>-</td><td>PS (仅 DS4)</td></tr><tr><td>TOUCHPAD</td><td><code>131072</code></td><td>-</td><td>触摸板按下 (仅 DS4)</td></tr></tbody></table><h4 id="模拟输入-touch-down-touch-move-touch-up" tabindex="-1">模拟输入 (touch_down/touch_move/touch_up) <a class="header-anchor" href="#模拟输入-touch-down-touch-move-touch-up" aria-label="Permalink to &quot;模拟输入 (touch_down/touch_move/touch_up)&quot;">​</a></h4><p>使用 <code>contact</code> 参数选择控制目标：</p><table tabindex="0"><thead><tr><th>Contact</th><th>说明</th><th>x/y 范围</th><th>pressure 范围</th></tr></thead><tbody><tr><td>0</td><td>左摇杆</td><td>-32768 ~ 32767</td><td>忽略</td></tr><tr><td>1</td><td>右摇杆</td><td>-32768 ~ 32767</td><td>忽略</td></tr><tr><td>2</td><td>左扳机 (LT/L2)</td><td>忽略</td><td>0 ~ 255</td></tr><tr><td>3</td><td>右扳机 (RT/R2)</td><td>忽略</td><td>0 ~ 255</td></tr></tbody></table><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><ul><li>需要安装 ViGEm Bus Driver 才能使用此控制器。</li></ul></div>',50)])])}]]);export{o as __pageData,r as default};
