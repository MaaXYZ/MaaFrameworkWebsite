import{_ as t,c as e,o as d,a2 as a}from"./chunks/framework.CU_Lz0Mo.js";const o=JSON.parse('{"title":"2.4 Control Methods","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/2.4-ControlMethods.md","filePath":"en/docs/2.4-ControlMethods.md","lastUpdated":null}');const i=t({name:"en/docs/2.4-ControlMethods.md"},[["render",function(t,o,i,s,r,n){return d(),e("div",null,[...o[0]||(o[0]=[a('<h1 id="_2-4-control-methods" tabindex="-1">2.4 Control Methods <a class="header-anchor" href="#_2-4-control-methods" aria-label="Permalink to &quot;2.4 Control Methods&quot;">​</a></h1><p>This document provides detailed explanations of the various Screencap (screenshot) and Input (control) methods in MaaFramework and their configurations.</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p></p><ul><li>For APIs, screencap/input uses <code>int</code> type (bitwise OR combination); for <a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a>, use <code>string</code> type (use the name directly).</li><li><a href="3.3-ProjectInterfaceV2">ProjectInterface V2</a> only supports configuring screencap/mouse/keyboard methods for Win32 controllers. For Adb controllers, screencap/input uses <code>MaaToolkitAdbDeviceFind</code> to automatically detect and select the optimal method, no manual configuration required.</li></ul></div><h2 id="adb" tabindex="-1">Adb <a class="header-anchor" href="#adb" aria-label="Permalink to &quot;Adb&quot;">​</a></h2><h3 id="adb-input" tabindex="-1">Adb Input <a class="header-anchor" href="#adb-input" aria-label="Permalink to &quot;Adb Input&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L227-L240" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Combine the selected methods below using <strong>bitwise OR</strong> to provide a single value. MaaFramework will try all provided methods in a fixed priority order and select the first available method.</p><p>By default, all methods except EmulatorExtras are attempted.</p><blockquote><p>Priority: EmulatorExtras &gt; Maatouch &gt; MinitouchAndAdbKey &gt; AdbShell</p></blockquote><table tabindex="0"><thead><tr><th>Name</th><th>API Value</th><th>Speed</th><th>Compatibility</th><th>Description</th></tr></thead><tbody><tr><td>AdbShell</td><td><code>1</code></td><td>Slow</td><td>High</td><td></td></tr><tr><td>MinitouchAndAdbKey</td><td><code>2</code></td><td>Fast</td><td>Medium</td><td>Key input still uses AdbShell</td></tr><tr><td>Maatouch</td><td><code>4</code></td><td>Fast</td><td>Medium</td><td></td></tr><tr><td>EmulatorExtras</td><td><code>8</code></td><td>Fast</td><td>Low</td><td>Only supports emulators: MuMu 12</td></tr></tbody></table><h3 id="adb-screencap" tabindex="-1">Adb Screencap <a class="header-anchor" href="#adb-screencap" aria-label="Permalink to &quot;Adb Screencap&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L208-L225" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Combine the selected methods below using <strong>bitwise OR</strong> to provide a single value. MaaFramework will try all provided methods and select the fastest available method.</p><p>By default, all methods except <code>RawByNetcat</code>, <code>MinicapDirect</code>, and <code>MinicapStream</code> are attempted.</p><p><code>MinicapDirect</code> and <code>MinicapStream</code> encode to jpg (lossy compression), which significantly reduces template matching effectiveness and are not recommended.</p><table tabindex="0"><thead><tr><th>Name</th><th>API Value</th><th>Speed</th><th>Compatibility</th><th>Encoding</th><th>Description</th></tr></thead><tbody><tr><td>EncodeToFileAndPull</td><td><code>1</code></td><td>Slow</td><td>High</td><td>Lossless</td><td></td></tr><tr><td>Encode</td><td><code>2</code></td><td>Slow</td><td>High</td><td>Lossless</td><td></td></tr><tr><td>RawWithGzip</td><td><code>4</code></td><td>Medium</td><td>High</td><td>Lossless</td><td></td></tr><tr><td>RawByNetcat</td><td><code>8</code></td><td>Fast</td><td>Low</td><td>Lossless</td><td></td></tr><tr><td>MinicapDirect</td><td><code>16</code></td><td>Fast</td><td>Low</td><td>Lossy</td><td></td></tr><tr><td>MinicapStream</td><td><code>32</code></td><td>Very Fast</td><td>Low</td><td>Lossy</td><td></td></tr><tr><td>EmulatorExtras</td><td><code>64</code></td><td>Very Fast</td><td>Low</td><td>Lossless</td><td>Only supports emulators: MuMu 12, LDPlayer 9</td></tr></tbody></table><h2 id="win32" tabindex="-1">Win32 <a class="header-anchor" href="#win32" aria-label="Permalink to &quot;Win32&quot;">​</a></h2><h3 id="win32-input" tabindex="-1">Win32 Input <a class="header-anchor" href="#win32-input" aria-label="Permalink to &quot;Win32 Input&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L252-L259" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Select one of the values below.</p><p>No default value. Client can choose one as the default.</p><p>Different programs on Win32 handle input differently, so there is no universal method.</p><table tabindex="0"><thead><tr><th>Name</th><th>API Value</th><th>Compatibility</th><th>Requires Admin</th><th>Seizes Cursor</th><th>Background</th><th>Description</th></tr></thead><tbody><tr><td>Seize</td><td><code>1</code></td><td>High</td><td>No</td><td>Yes</td><td>No</td><td></td></tr><tr><td>SendMessage</td><td><code>2</code></td><td>Medium</td><td>Maybe</td><td>No</td><td>Yes</td><td></td></tr><tr><td>PostMessage</td><td><code>4</code></td><td>Medium</td><td>Maybe</td><td>No</td><td>Yes</td><td></td></tr><tr><td>LegacyEvent</td><td><code>8</code></td><td>Low</td><td>No</td><td>Yes</td><td>No</td><td></td></tr><tr><td>PostThreadMessage</td><td><code>16</code></td><td>Low</td><td>Maybe</td><td>No</td><td>Yes</td><td></td></tr><tr><td>SendMessageWithCursorPos</td><td><code>32</code></td><td>Medium</td><td>Maybe</td><td>Brief</td><td>Yes</td><td>Designed for games like Genshin Impact that detect actual mouse position</td></tr><tr><td>PostMessageWithCursorPos</td><td><code>64</code></td><td>Medium</td><td>Maybe</td><td>Brief</td><td>Yes</td><td>Designed for games like Genshin Impact that detect actual mouse position</td></tr></tbody></table><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><ul><li>Admin privileges mainly depend on the target program&#39;s permission level. If the target program runs as administrator, running with admin privileges is required for compatibility.</li><li>The <code>WithCursorPos</code> methods briefly move the cursor to the target position, then restore it after sending the message, hence &quot;Brief&quot; cursor seizure, but it does not block user operations.</li></ul></div><h3 id="win32-screencap" tabindex="-1">Win32 Screencap <a class="header-anchor" href="#win32-screencap" aria-label="Permalink to &quot;Win32 Screencap&quot;">​</a></h3><blockquote><p>Reference: <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaDef.h#L242-L250" target="_blank" rel="noopener noreferrer">MaaDef.h</a></p></blockquote><p>Select one of the values below.</p><p>No default value. Client can choose one as the default.</p><p>Different programs on Win32 handle rendering differently, so there is no universal method.</p><table tabindex="0"><thead><tr><th>Name</th><th>API Value</th><th>Speed</th><th>Compatibility</th><th>Requires Admin</th><th>Background</th><th>Description</th></tr></thead><tbody><tr><td>GDI</td><td><code>1</code></td><td>Fast</td><td>Medium</td><td>No</td><td>No</td><td></td></tr><tr><td>FramePool</td><td><code>2</code></td><td>Very Fast</td><td>Medium</td><td>No</td><td>Yes</td><td>Available on Windows 10 1903+</td></tr><tr><td>DXGI_DesktopDup</td><td><code>4</code></td><td>Very Fast</td><td>Low</td><td>No</td><td>No</td><td>Desktop duplication (full-screen output copy)</td></tr><tr><td>DXGI_DesktopDup_Window</td><td><code>8</code></td><td>Very Fast</td><td>Low</td><td>No</td><td>No</td><td>Desktop duplication cropped to window</td></tr><tr><td>PrintWindow</td><td><code>16</code></td><td>Medium</td><td>Medium</td><td>No</td><td>Yes</td><td></td></tr><tr><td>ScreenDC</td><td><code>32</code></td><td>Fast</td><td>High</td><td>No</td><td>No</td><td></td></tr></tbody></table><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>Windows stops rendering window content when the window is minimized. All screenshot methods cannot capture valid content from minimized windows, so please avoid minimizing the window.</p></div><h2 id="playcover-macos" tabindex="-1">PlayCover (macOS) <a class="header-anchor" href="#playcover-macos" aria-label="Permalink to &quot;PlayCover (macOS)&quot;">​</a></h2><p>The PlayCover controller is used to control iOS applications running via <a href="https://github.com/hguandl/PlayCover/releases" target="_blank" rel="noopener noreferrer">fork PlayCover</a> on macOS.</p><h3 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage&quot;">​</a></h3><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// C API</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">auto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MaaPlayCoverControllerCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:1717&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Python</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maa.controller </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PlayCoverController</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">controller </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PlayCoverController(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:1717&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NodeJS</span></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maa.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PlayCoverController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1:1717&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>address</td><td>PlayTools service listening address, format: <code>host:port</code>, e.g., <code>127.0.0.1:1717</code></td></tr><tr><td>uuid</td><td>Target application&#39;s Bundle Identifier, e.g., <code>com.hypergryph.arknights</code></td></tr></tbody></table><h3 id="supported-features" tabindex="-1">Supported Features <a class="header-anchor" href="#supported-features" aria-label="Permalink to &quot;Supported Features&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Feature</th><th>Supported</th><th>Description</th></tr></thead><tbody><tr><td>Screenshot (screencap)</td><td>✓</td><td>Retrieves RGBA raw data via PlayTools protocol</td></tr><tr><td>Click (click)</td><td>✓</td><td>Implemented using touch_down + touch_up</td></tr><tr><td>Swipe (swipe)</td><td>✓</td><td>Smooth trajectory using cubic spline interpolation</td></tr><tr><td>Touch (touch_down/move/up)</td><td>✓</td><td>Single touch only (contact=0)</td></tr><tr><td>Stop App (stop_app)</td><td>✓</td><td>Sends terminate command</td></tr><tr><td>Start App (start_app)</td><td>✗</td><td>PlayCover does not support launching apps via protocol</td></tr><tr><td>Key Press (click_key/key_down/key_up)</td><td>✗</td><td>Not supported by PlayTools protocol</td></tr><tr><td>Text Input (input_text)</td><td>✗</td><td>Not supported by PlayTools protocol</td></tr><tr><td>Scroll (scroll)</td><td>✗</td><td>Not supported by PlayTools protocol</td></tr></tbody></table><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h3><ol><li>Install <a href="https://github.com/hguandl/PlayCover/releases" target="_blank" rel="noopener noreferrer">fork PlayCover</a> on macOS</li><li>Target iOS app must have MaaTools feature enabled in PlayCover</li></ol><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>The PlayCover controller&#39;s feature flag is <code>MaaControllerFeature_UseMouseDownAndUpInsteadOfClick</code>, indicating that the framework will use touch_down + touch_up instead of click operations.</p></div>',44)])])}]]);export{o as __pageData,i as default};
