import{_ as i,c as a,o as e,a4 as n}from"./chunks/framework.QjAkUUnS.js";const c=JSON.parse('{"title":"2.3 Callback Protocol","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/2.3-CallbackProtocol.md","filePath":"en/docs/2.3-CallbackProtocol.md","lastUpdated":null}'),t={name:"en/docs/2.3-CallbackProtocol.md"};function l(o,s,h,d,p,k){return e(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="_2-3-callback-protocol" tabindex="-1">2.3 Callback Protocol <a class="header-anchor" href="#_2-3-callback-protocol" aria-label="Permalink to &quot;2.3 Callback Protocol&quot;">​</a></h1><p>MaaFramework sends various status notifications and event messages to upper-layer applications through the <code>MaaEventCallback</code> callback function. All callback messages follow a unified format: message type (message) + detailed data (details).</p><h2 id="message-format" tabindex="-1">Message Format <a class="header-anchor" href="#message-format" aria-label="Permalink to &quot;Message Format&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typedef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MAA_CALL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MaaEventCallback)(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handle, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> message, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> details_json, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> trans_arg);</span></span></code></pre></div><ul><li><strong>handle</strong>: Handle of the related object <ul><li>MaaTasker* for MaaTasker event</li><li>MaaResource* for MaaResource event</li><li>MaaController* for MaaController event</li><li>MaaContext* for MaaContext event</li></ul></li><li><strong>message</strong>: Message type string that identifies the event type</li><li><strong>details_json</strong>: JSON-formatted detailed data containing specific event information</li><li><strong>trans_arg</strong>: User-defined callback parameter</li></ul><h2 id="message-types" tabindex="-1">Message Types <a class="header-anchor" href="#message-types" aria-label="Permalink to &quot;Message Types&quot;">​</a></h2><h3 id="resource-loading-messages" tabindex="-1">Resource Loading Messages <a class="header-anchor" href="#resource-loading-messages" aria-label="Permalink to &quot;Resource Loading Messages&quot;">​</a></h3><p>Used to notify changes in resource loading status.</p><h4 id="resource-loading-starting" tabindex="-1"><code>Resource.Loading.Starting</code> <a class="header-anchor" href="#resource-loading-starting" aria-label="Permalink to &quot;\`Resource.Loading.Starting\`&quot;">​</a></h4><p>Sent when resource loading begins.</p><p><strong>details_json structure:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;res_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bundle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;hash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc123def456&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>res_id</code>: Resource ID (number)</li><li><code>path</code>: Resource path (string)</li><li><code>type</code>: Loading type (string) <ul><li><code>&quot;Bundle&quot;</code>: Complete resource directory (loaded via <code>post_bundle</code>)</li><li><code>&quot;OcrModel&quot;</code>: OCR model directory (loaded via <code>post_ocr_model</code>)</li><li><code>&quot;Pipeline&quot;</code>: Pipeline directory or single json/jsonc file (loaded via <code>post_pipeline</code>)</li><li><code>&quot;Image&quot;</code>: Image directory or single image file (loaded via <code>post_image</code>)</li></ul></li><li><code>hash</code>: Resource hash value (string)</li></ul><h4 id="resource-loading-succeeded" tabindex="-1"><code>Resource.Loading.Succeeded</code> <a class="header-anchor" href="#resource-loading-succeeded" aria-label="Permalink to &quot;\`Resource.Loading.Succeeded\`&quot;">​</a></h4><p>Sent when resource loading succeeds. Same data structure as above.</p><h4 id="resource-loading-failed" tabindex="-1"><code>Resource.Loading.Failed</code> <a class="header-anchor" href="#resource-loading-failed" aria-label="Permalink to &quot;\`Resource.Loading.Failed\`&quot;">​</a></h4><p>Sent when resource loading fails. Same data structure as above.</p><h3 id="controller-action-messages" tabindex="-1">Controller Action Messages <a class="header-anchor" href="#controller-action-messages" aria-label="Permalink to &quot;Controller Action Messages&quot;">​</a></h3><p>Used to notify the status of controller action execution.</p><h4 id="controller-action-starting" tabindex="-1"><code>Controller.Action.Starting</code> <a class="header-anchor" href="#controller-action-starting" aria-label="Permalink to &quot;\`Controller.Action.Starting\`&quot;">​</a></h4><p>Sent when the controller begins executing an action.</p><p><strong>details_json structure:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ctrl_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>ctrl_id</code>: Controller ID (number)</li><li><code>uuid</code>: Unique identifier (string)</li><li><code>action</code>: Action type (string)</li><li><code>param</code>: Action parameters (object)</li></ul><h4 id="controller-action-succeeded" tabindex="-1"><code>Controller.Action.Succeeded</code> <a class="header-anchor" href="#controller-action-succeeded" aria-label="Permalink to &quot;\`Controller.Action.Succeeded\`&quot;">​</a></h4><p>Sent when controller action execution succeeds. Same data structure as above.</p><h4 id="controller-action-failed" tabindex="-1"><code>Controller.Action.Failed</code> <a class="header-anchor" href="#controller-action-failed" aria-label="Permalink to &quot;\`Controller.Action.Failed\`&quot;">​</a></h4><p>Sent when controller action execution fails. Same data structure as above.</p><h3 id="task-messages" tabindex="-1">Task Messages <a class="header-anchor" href="#task-messages" aria-label="Permalink to &quot;Task Messages&quot;">​</a></h3><p>Used to notify task execution status.</p><h4 id="tasker-task-starting" tabindex="-1"><code>Tasker.Task.Starting</code> <a class="header-anchor" href="#tasker-task-starting" aria-label="Permalink to &quot;\`Tasker.Task.Starting\`&quot;">​</a></h4><p>Sent when task execution begins.</p><p><strong>details_json structure:</strong></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;entry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyTask&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uuid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;hash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc123def456&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>entry</code>: Entry task name (string)</li><li><code>uuid</code>: Unique identifier (string)</li><li><code>hash</code>: Task hash value (string)</li></ul><h4 id="tasker-task-succeeded" tabindex="-1"><code>Tasker.Task.Succeeded</code> <a class="header-anchor" href="#tasker-task-succeeded" aria-label="Permalink to &quot;\`Tasker.Task.Succeeded\`&quot;">​</a></h4><p>Sent when task execution succeeds. Same data structure as above.</p><h4 id="tasker-task-failed" tabindex="-1"><code>Tasker.Task.Failed</code> <a class="header-anchor" href="#tasker-task-failed" aria-label="Permalink to &quot;\`Tasker.Task.Failed\`&quot;">​</a></h4><p>Sent when task execution fails. Same data structure as above.</p><h3 id="node-next-list-messages" tabindex="-1">Node Next List Messages <a class="header-anchor" href="#node-next-list-messages" aria-label="Permalink to &quot;Node Next List Messages&quot;">​</a></h3><p>Used to notify the recognition of next node list.</p><h4 id="node-nextlist-starting" tabindex="-1"><code>Node.NextList.Starting</code> <a class="header-anchor" href="#node-nextlist-starting" aria-label="Permalink to &quot;\`Node.NextList.Starting\`&quot;">​</a></h4><p>Sent when a node begins recognizing its next node list.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;jump_back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;jump_back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LastHandler&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;jump_back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>list</code>: Next node list (object array) <ul><li><code>name</code>: Node name or anchor name (string)</li><li><code>jump_back</code>: Whether to jump back (boolean)</li><li><code>anchor</code>: Whether this is an anchor reference (boolean). If true, name is an anchor name</li></ul></li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-nextlist-succeeded" tabindex="-1"><code>Node.NextList.Succeeded</code> <a class="header-anchor" href="#node-nextlist-succeeded" aria-label="Permalink to &quot;\`Node.NextList.Succeeded\`&quot;">​</a></h4><p>Sent when a node successfully recognizes its next node list. Same data structure as above.</p><h4 id="node-nextlist-failed" tabindex="-1"><code>Node.NextList.Failed</code> <a class="header-anchor" href="#node-nextlist-failed" aria-label="Permalink to &quot;\`Node.NextList.Failed\`&quot;">​</a></h4><p>Sent when a node fails to recognize its next node list. Same data structure as above.</p><h3 id="node-recognition-messages" tabindex="-1">Node Recognition Messages <a class="header-anchor" href="#node-recognition-messages" aria-label="Permalink to &quot;Node Recognition Messages&quot;">​</a></h3><p>Used to notify the status of node recognition processes.</p><h4 id="node-recognition-starting" tabindex="-1"><code>Node.Recognition.Starting</code> <a class="header-anchor" href="#node-recognition-starting" aria-label="Permalink to &quot;\`Node.Recognition.Starting\`&quot;">​</a></h4><p>Sent when node recognition begins.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;reco_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>reco_id</code>: Recognition ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-recognition-succeeded" tabindex="-1"><code>Node.Recognition.Succeeded</code> <a class="header-anchor" href="#node-recognition-succeeded" aria-label="Permalink to &quot;\`Node.Recognition.Succeeded\`&quot;">​</a></h4><p>Sent when node recognition succeeds. Same data structure as above.</p><h4 id="node-recognition-failed" tabindex="-1"><code>Node.Recognition.Failed</code> <a class="header-anchor" href="#node-recognition-failed" aria-label="Permalink to &quot;\`Node.Recognition.Failed\`&quot;">​</a></h4><p>Sent when node recognition fails. Same data structure as above.</p><h3 id="node-action-messages" tabindex="-1">Node Action Messages <a class="header-anchor" href="#node-action-messages" aria-label="Permalink to &quot;Node Action Messages&quot;">​</a></h3><p>Used to notify the status of node action execution.</p><h4 id="node-action-starting" tabindex="-1"><code>Node.Action.Starting</code> <a class="header-anchor" href="#node-action-starting" aria-label="Permalink to &quot;\`Node.Action.Starting\`&quot;">​</a></h4><p>Sent when a node begins executing an action.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;node_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;action_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11111</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>action_id</code>: Action ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-action-succeeded" tabindex="-1"><code>Node.Action.Succeeded</code> <a class="header-anchor" href="#node-action-succeeded" aria-label="Permalink to &quot;\`Node.Action.Succeeded\`&quot;">​</a></h4><p>Sent when node action execution succeeds. Same data structure as above.</p><h4 id="node-action-failed" tabindex="-1"><code>Node.Action.Failed</code> <a class="header-anchor" href="#node-action-failed" aria-label="Permalink to &quot;\`Node.Action.Failed\`&quot;">​</a></h4><p>Sent when node action execution fails. Same data structure as above.</p><h3 id="pipeline-node-messages" tabindex="-1">Pipeline Node Messages <a class="header-anchor" href="#pipeline-node-messages" aria-label="Permalink to &quot;Pipeline Node Messages&quot;">​</a></h3><p>Used to notify the status of pipeline node execution. Pipeline node messages are sent when executing full pipeline tasks through <code>post_task</code> or <code>run_task</code>.</p><h4 id="node-pipelinenode-starting" tabindex="-1"><code>Node.PipelineNode.Starting</code> <a class="header-anchor" href="#node-pipelinenode-starting" aria-label="Permalink to &quot;\`Node.PipelineNode.Starting\`&quot;">​</a></h4><p>Sent when a pipeline node begins executing.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;node_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>node_id</code>: Node ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-pipelinenode-succeeded" tabindex="-1"><code>Node.PipelineNode.Succeeded</code> <a class="header-anchor" href="#node-pipelinenode-succeeded" aria-label="Permalink to &quot;\`Node.PipelineNode.Succeeded\`&quot;">​</a></h4><p>Sent when pipeline node execution succeeds. Same data structure as above.</p><h4 id="node-pipelinenode-failed" tabindex="-1"><code>Node.PipelineNode.Failed</code> <a class="header-anchor" href="#node-pipelinenode-failed" aria-label="Permalink to &quot;\`Node.PipelineNode.Failed\`&quot;">​</a></h4><p>Sent when pipeline node execution fails. Same data structure as above.</p><h3 id="recognition-node-messages" tabindex="-1">Recognition Node Messages <a class="header-anchor" href="#recognition-node-messages" aria-label="Permalink to &quot;Recognition Node Messages&quot;">​</a></h3><p>Used to notify the status of recognition node execution. Recognition node messages are sent only when executing recognition-only tasks through <code>run_recognition</code>.</p><h4 id="node-recognitionnode-starting" tabindex="-1"><code>Node.RecognitionNode.Starting</code> <a class="header-anchor" href="#node-recognitionnode-starting" aria-label="Permalink to &quot;\`Node.RecognitionNode.Starting\`&quot;">​</a></h4><p>Sent when a recognition node begins executing.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;node_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>node_id</code>: Node ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-recognitionnode-succeeded" tabindex="-1"><code>Node.RecognitionNode.Succeeded</code> <a class="header-anchor" href="#node-recognitionnode-succeeded" aria-label="Permalink to &quot;\`Node.RecognitionNode.Succeeded\`&quot;">​</a></h4><p>Sent when recognition node execution succeeds. Same data structure as above.</p><h4 id="node-recognitionnode-failed" tabindex="-1"><code>Node.RecognitionNode.Failed</code> <a class="header-anchor" href="#node-recognitionnode-failed" aria-label="Permalink to &quot;\`Node.RecognitionNode.Failed\`&quot;">​</a></h4><p>Sent when recognition node execution fails. Same data structure as above.</p><h3 id="action-node-messages" tabindex="-1">Action Node Messages <a class="header-anchor" href="#action-node-messages" aria-label="Permalink to &quot;Action Node Messages&quot;">​</a></h3><p>Used to notify the status of action node execution. Action node messages are sent only when executing action-only tasks through <code>run_action</code>.</p><h4 id="node-actionnode-starting" tabindex="-1"><code>Node.ActionNode.Starting</code> <a class="header-anchor" href="#node-actionnode-starting" aria-label="Permalink to &quot;\`Node.ActionNode.Starting\`&quot;">​</a></h4><p>Sent when an action node begins executing.</p><p><strong>details_json structure:</strong></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;task_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;node_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">67890</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>task_id</code>: Task ID (number)</li><li><code>node_id</code>: Node ID (number)</li><li><code>name</code>: Node name (string)</li><li><code>focus</code>: Focus-related data (any type)</li></ul><h4 id="node-actionnode-succeeded" tabindex="-1"><code>Node.ActionNode.Succeeded</code> <a class="header-anchor" href="#node-actionnode-succeeded" aria-label="Permalink to &quot;\`Node.ActionNode.Succeeded\`&quot;">​</a></h4><p>Sent when action node execution succeeds. Same data structure as above.</p><h4 id="node-actionnode-failed" tabindex="-1"><code>Node.ActionNode.Failed</code> <a class="header-anchor" href="#node-actionnode-failed" aria-label="Permalink to &quot;\`Node.ActionNode.Failed\`&quot;">​</a></h4><p>Sent when action node execution fails. Same data structure as above.</p><h2 id="usage-example" tabindex="-1">Usage Example <a class="header-anchor" href="#usage-example" aria-label="Permalink to &quot;Usage Example&quot;">​</a></h2><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> char*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> details_json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void*</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> callback_arg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Parse message type</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strcmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tasker.Task.Starting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Parse JSON to get task details</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Update UI to show task starting status</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strcmp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Node.Recognition.Succeeded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Handle recognition success event</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Update recognition result display</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... handle other message types</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Set callback</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaaTaskerAddSink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tasker, MyCallback, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaaTaskerAddNodeSink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tasker, MyCallback, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nullptr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="important-notes" tabindex="-1">Important Notes <a class="header-anchor" href="#important-notes" aria-label="Permalink to &quot;Important Notes&quot;">​</a></h2><ol><li><strong>JSON Parsing</strong>: The <code>details_json</code> parameter is always a valid JSON string. It&#39;s recommended to use a mature JSON library for parsing</li><li><strong>Thread Safety</strong>: Callback functions may be called from different threads, so thread safety considerations are necessary</li><li><strong>Performance</strong>: Callback functions should return quickly to avoid blocking the framework&#39;s execution flow</li><li><strong>Error Handling</strong>: It&#39;s recommended to add exception handling in callback functions to prevent callback exceptions from affecting framework operation</li></ol>`,109)])])}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
