<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3.1 任务流水线（Pipeline）协议 | MaaFramework</title>
    
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/theme.BcFIOJEF.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.B8mXXTcE.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.CU_Lz0Mo.js">
    <link rel="modulepreload" href="/assets/chunks/theme.ZKhQfwH3.js">
    <link rel="modulepreload" href="/assets/chunks/katex.CYzaLkmr.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.BgTXmTJL.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.CtCQd840.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.D0kSi0Qs.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.lbrfKCa_.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.BnIuFaBr.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.YK6MdtiQ.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-LVOFAZNH.BKN9fy4A.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-ER5ION4S.-frHrHeA.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.9-NhcxDR.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.9Q7rNLSH.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.BJFo2hqr.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.BB_igbCK.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.BFH5ur1f.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.lz94gKZO.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.lz94gKZO.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.C_AUZx07.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.BP17jMI4.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.CsmwmTfn.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.D8OBrEz8.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.qZIcHlHN.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.DnHYdq7x.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.DIIrk_ll.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.Dy-4cnVX.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.CXmD8M-m.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.BJGyyl44.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.DvbK9xXU.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.Bmi2YniB.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/docs_3.1-PipelineProtocol.md.B5UV2DEr.lean.js">
    <link rel="preload" href="/maafw.png" as="image">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="">
    <link rel="icon" href="/maafw.ico">
    <meta name="author" content="MaaXYZ">
    <meta name="theme-color" content="#1b73e8">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="MaaFramework">
    <meta name="robots" content="index,follow">
    <meta name="twitter:card" content="summary_large_image">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="canonical" href="https://maafw.xyz/">
    <link rel="alternate" href="https://maafw.xyz/" hreflang="zh-CN">
    <link rel="alternate" href="https://maafw.xyz/en/" hreflang="en-US">
    <link rel="alternate" href="https://maafw.xyz/" hreflang="x-default">
    <meta property="og:url" content="https://maafw.xyz/">
    <meta property="og:title" content="MaaFramework">
    <meta property="og:description" content="基于图像识别的自动化黑盒测试框架">
    <meta property="og:image" content="https://maafw.xyz/maafw.png">
    <meta property="og:locale" content="zh_CN">
    <meta name="description" content="基于图像识别的自动化黑盒测试框架">
    <meta name="twitter:title" content="MaaFramework">
    <meta name="twitter:description" content="基于图像识别的自动化黑盒测试框架">
    <meta name="twitter:image" content="https://maafw.xyz/maafw.png">
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"MaaFramework","url":"https://maafw.xyz/","inLanguage":"zh-CN"}</script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"首页","item":"https://maafw.xyz/"}]}</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/maafw.png" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>MaaFramework</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/docs/1.1-QuickStarted" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>文档</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>社区</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/community/projects" data-v-35975db6><!--[--><span data-v-35975db6>社区项目</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>友情链接</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link vp-external-link-icon" href="https://maa.plus" target="_blank" rel="noreferrer" data-v-35975db6><!--[--><span data-v-35975db6>MaaAssistantArknights</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://deepwiki.com/MaaXYZ/MaaFramework" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>问 AI 🤖</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-6aa21345 data-v-88af2de4 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><span class="vpi-languages option-icon" data-v-cf11d7a2></span><!----><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="items" data-v-88af2de4><p class="title" data-v-88af2de4>简体中文</p><!--[--><div class="VPMenuLink" data-v-88af2de4 data-v-35975db6><a class="VPLink link" href="/en/docs/3.1-PipelineProtocol" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/MaaXYZ/MaaFramework" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="group translations" data-v-bb2aa2f0><p class="trans-title" data-v-bb2aa2f0>简体中文</p><!--[--><div class="VPMenuLink" data-v-bb2aa2f0 data-v-35975db6><a class="VPLink link" href="/en/docs/3.1-PipelineProtocol" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/MaaXYZ/MaaFramework" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><!----><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/1.1-QuickStarted" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/1.2-ExplanationOfTerms" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>术语解释</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/2.1-Integration" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>集成文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/2.2-IntegratedInterfaceOverview" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>集成接口一览</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/2.3-CallbackProtocol" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>回调协议</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/2.4-ControlMethods" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>控制方式说明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/3.1-PipelineProtocol" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>任务流水线协议</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/3.2-ProjectInterface" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ProjectInterface协议</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/3.3-ProjectInterfaceV2" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>ProjectInterfaceV2协议</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/4.1-BuildGuide" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>构建指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/4.2-StandardizedInterfaceDesign" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>标准化接口设计</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/5.1-Troubleshooting" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>问题反馈</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>NodeJS</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/NodeJS/J1.1-QuickStarted" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/NodeJS/J1.2-Custom%20Recognition%20and%20Action" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>自定义识别_操作</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/docs/NodeJS/J1.3-Packaging" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>打包</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _docs_3_1-PipelineProtocol" data-v-39a288b8><div><h1 id="_3-1-任务流水线-pipeline-协议" tabindex="-1">3.1 任务流水线（Pipeline）协议 <a class="header-anchor" href="#_3-1-任务流水线-pipeline-协议" aria-label="Permalink to &quot;3.1 任务流水线（Pipeline）协议&quot;">​</a></h1><h2 id="基础格式" tabindex="-1">基础格式 <a class="header-anchor" href="#基础格式" aria-label="Permalink to &quot;基础格式&quot;">​</a></h2><p>任务流水线采用 JSON 格式描述，由若干节点（Node）构成，每个节点包含以下核心属性：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OCR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 识别算法</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 执行动作</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 后继节点列表</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;NodeC&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 其他扩展属性...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 其他节点定义...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="执行逻辑" tabindex="-1">执行逻辑 <a class="header-anchor" href="#执行逻辑" aria-label="Permalink to &quot;执行逻辑&quot;">​</a></h2><h3 id="流程控制机制" tabindex="-1">流程控制机制 <a class="header-anchor" href="#流程控制机制" aria-label="Permalink to &quot;流程控制机制&quot;">​</a></h3><ol><li><p><strong>任务触发</strong></p><ul><li>通过 tasker.post_task 接口指定入口节点启动任务</li></ul></li><li><p><strong>顺序检测</strong></p><ul><li>对当前节点的 next 列表进行顺序检测</li><li>依次尝试识别每个子节点配置的 recognition 特征</li></ul></li><li><p><strong>中断机制</strong></p><ul><li>当检测到某个子节点匹配成功时，立即终止后续节点检测</li><li>执行匹配节点的 action 定义的操作</li></ul></li><li><p><strong>后继处理</strong></p><ul><li>操作执行完成后，将激活节点切换为当前节点</li><li>重复执行上述检测流程</li></ul></li></ol><h3 id="终止条件" tabindex="-1">终止条件 <a class="header-anchor" href="#终止条件" aria-label="Permalink to &quot;终止条件&quot;">​</a></h3><p>当满足以下任意条件时，任务流程终止：</p><ul><li>当前节点的 next 列表为空</li><li>所有后继节点持续检测失败直至超时</li></ul><h2 id="应用示例" tabindex="-1">应用示例 <a class="header-anchor" href="#应用示例" aria-label="Permalink to &quot;应用示例&quot;">​</a></h2><h3 id="场景描述" tabindex="-1">场景描述 <a class="header-anchor" href="#场景描述" aria-label="Permalink to &quot;场景描述&quot;">​</a></h3><p>Android 设置界面存在菜单 <code>显示</code>/<code>存储</code>/<code>无障碍</code>，其中 <code>存储</code> 打开后包含二级菜单 <code>游戏</code>/<code>应用</code>。</p><h3 id="配置示例" tabindex="-1">配置示例 <a class="header-anchor" href="#配置示例" aria-label="Permalink to &quot;配置示例&quot;">​</a></h3><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;开始示例&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;进入显示&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;进入存储&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;进入无障碍&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;进入显示&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XXX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;进入存储&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XXX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;进入游戏二级菜单&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;进入应用二级菜单&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;进入无障碍&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;进入游戏二级菜单&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Swipe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;进入应用二级菜单&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="执行过程推演" tabindex="-1">执行过程推演 <a class="header-anchor" href="#执行过程推演" aria-label="Permalink to &quot;执行过程推演&quot;">​</a></h3><h4 id="情况一" tabindex="-1">情况一 <a class="header-anchor" href="#情况一" aria-label="Permalink to &quot;情况一&quot;">​</a></h4><div class="mermaid"></div><h4 id="情况二" tabindex="-1">情况二 <a class="header-anchor" href="#情况二" aria-label="Permalink to &quot;情况二&quot;">​</a></h4><div class="mermaid"></div><h2 id="属性字段" tabindex="-1">属性字段 <a class="header-anchor" href="#属性字段" aria-label="Permalink to &quot;属性字段&quot;">​</a></h2><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p><strong>对于必选字段，Pipeline JSON 文件中仍可为空，但需在实际执行前通过接口设置。</strong><br> 以点（<code>.</code>）开头的文件夹、JSON 文件将不会被读取。<br> 以 <code>$</code> 开头的 JSON root field 将不会被解析。</p></div><h3 id="pipeline-v1" tabindex="-1">Pipeline v1 <a class="header-anchor" href="#pipeline-v1" aria-label="Permalink to &quot;Pipeline v1&quot;">​</a></h3><ul><li><p><code>recognition</code> : <em>string</em><br> 识别算法类型。可选，默认 <a href="#directhit"><code>DirectHit</code></a> 。<br> 可选的值：<a href="#directhit"><code>DirectHit</code></a> | <a href="#templatematch"><code>TemplateMatch</code></a> | <a href="#featurematch"><code>FeatureMatch</code></a> | <a href="#colormatch"><code>ColorMatch</code></a> | <a href="#ocr"><code>OCR</code></a> | <a href="#neuralnetworkclassify"><code>NeuralNetworkClassify</code></a> | <a href="#neuralnetworkdetect"><code>NeuralNetworkDetect</code></a> | <a href="#and"><code>And</code></a> | <a href="#or"><code>Or</code></a> | <a href="#custom"><code>Custom</code></a><br> 详见 <a href="#%E7%AE%97%E6%B3%95%E7%B1%BB%E5%9E%8B">算法类型</a>。</p></li><li><p><code>action</code>: <em>string</em><br> 执行的动作。可选，默认 <a href="#donothing"><code>DoNothing</code></a> 。<br> 可选的值：<a href="#donothing"><code>DoNothing</code></a> | <a href="#click"><code>Click</code></a> | <a href="#longpress"><code>LongPress</code></a> | <a href="#swipe"><code>Swipe</code></a> | <a href="#multiswipe"><code>MultiSwipe</code></a> | <a href="#scroll"><code>Scroll</code></a> | <a href="#clickkey"><code>ClickKey</code></a> | <a href="#longpresskey"><code>LongPressKey</code></a> | <a href="#inputtext"><code>InputText</code></a> | <a href="#startapp"><code>StartApp</code></a> | <a href="#stopapp"><code>StopApp</code></a> | <a href="#stoptask"><code>StopTask</code></a> | <a href="#command"><code>Command</code></a> | <a href="#shell"><code>Shell</code></a> | <a href="#custom-1"><code>Custom</code></a><br> 详见 <a href="#%E5%8A%A8%E4%BD%9C%E7%B1%BB%E5%9E%8B">动作类型</a>。</p></li><li><p><code>next</code> : <em>string</em> | <em>NodeAttr</em> | <em>list&lt;string | NodeAttr, &gt;</em><br> 接下来要执行的节点列表。可选，默认空。<br> 按顺序识别 next 中的每个节点，只执行第一个识别到的。<br> 💡 v5.1 版本起新增支持带属性节点、 NodeAttr 形式对象，或两者结合的异质数组。详情请参考 <a href="#%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">节点属性</a>。</p></li><li><p><code>is_sub</code>: <em>bool</em><br><strong>（已在 5.1 版本中废弃，推荐使用 <a href="#%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">节点属性</a> 中的 <code>[JumpBack]</code> 功能替代）</strong><br> 我们提供了 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/tools/migrate_pipeline_v5.py" target="_blank" rel="noopener noreferrer">迁移脚本</a>，可帮助您无损地将 Pipeline 自动转换为新风格~</p></li><li><p><code>interrupt</code> : <em>string</em> | <em>list&lt;string, &gt;</em><br><strong>（已在 5.1 版本中废弃，推荐使用 <a href="#%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">节点属性</a> 中的 <code>[JumpBack]</code> 功能替代）</strong><br> 我们提供了 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/tools/migrate_pipeline_v5.py" target="_blank" rel="noopener noreferrer">迁移脚本</a>，可帮助您无损地将 Pipeline 自动转换为新风格~</p></li><li><p><code>rate_limit</code>: <em>uint</em><br> 识别速率限制，单位毫秒。可选，默认 1000 。<br> 每轮识别最低消耗 <code>rate_limit</code> 毫秒，不足的时间将会 sleep 等待。</p></li><li><p><code>timeout</code>: <em>uint</em><br> 识别超时时间，毫秒。可选，默认 20 * 1000 。<br> 具体逻辑为 <code>while(!timeout) { foreach(next); sleep_until(rate_limit); }</code> 。</p></li><li><p><code>on_error</code> : <em>string</em> | <em>NodeAttr</em> | <em>list&lt;string | NodeAttr, &gt;</em><br> 当识别超时，或动作执行失败后，接下来会执行该列表中的节点。可选，默认空。<br> 💡 v5.1 版本起新增支持带属性节点、 NodeAttr 形式对象，或两者结合的异质数组。详情请参考 <a href="#%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">节点属性</a>。</p></li><li><p><code>anchor</code>: <em>string</em> | <em>list&lt;string, &gt;</em><br> 锚点名称。可选，默认空。<br> 当节点执行成功后，会将该锚点名设置为当前节点。多个节点可设置同一个锚点名，后执行的会覆盖先执行的。<br> 在 <code>next</code> 或 <code>on_error</code> 中可通过 <code>[Anchor]</code> 属性引用该锚点，运行时会解析为最后设置该锚点的节点。<br> 详见 <a href="#%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">节点属性</a>。</p></li><li><p><code>inverse</code>: <em>bool</em><br> 反转识别结果，识别到了当做没识别到，没识别到的当做识别到了。可选，默认 false 。<br> 请注意由此识别出的节点，Click 等动作的点击自身将失效（因为实际并没有识别到东西），若有需求可单独设置 <code>target</code> 。</p></li><li><p><code>enabled</code>: <em>bool</em><br> 是否启用该 node。可选，默认 true 。<br> 若为 false，其他 node 的 next 列表中的该 node 会被跳过，既不会被识别也不会被执行。</p></li><li><p><code>max_hit</code>: <em>uint</em><br> 该节点最多可被识别成功多少次。可选，默认 UINT_MAX ，即无限制。<br> 若超过该次数，其他 node 的 next 列表中的该 node 会被跳过，既不会被识别也不会被执行。</p></li><li><p><code>pre_delay</code>: <em>uint</em><br> 识别到 到 执行动作前 的延迟，毫秒。可选，默认 200 。<br> 推荐尽可能增加中间过程节点，少用延迟，不然既慢还不稳定。</p></li><li><p><code>post_delay</code>: <em>uint</em><br> 执行动作后 到 识别 next 的延迟，毫秒。可选，默认 200 。<br> 推荐尽可能增加中间过程节点，少用延迟，不然既慢还不稳定。</p></li><li><p><code>pre_wait_freezes</code>: <em>uint</em> | <em>object</em><br> 识别到 到 执行动作前，等待画面不动了的时间，毫秒。可选，默认 0 ，即不等待。<br> 连续 <code>pre_wait_freezes</code> 毫秒 画面 <strong>没有较大变化</strong> 才会退出动作。<br> 若为 object，可设置更多参数，详见 <a href="#%E7%AD%89%E5%BE%85%E7%94%BB%E9%9D%A2%E9%9D%99%E6%AD%A2">等待画面静止</a>。<br> 具体的顺序为 <code>pre_wait_freezes</code> - <code>pre_delay</code> - <code>action</code> - <code>post_wait_freezes</code> - <code>post_delay</code> 。</p></li><li><p><code>post_wait_freezes</code>: <em>uint</em> | <em>object</em><br> 行动动作后 到 识别 next，等待画面不动了的时间，毫秒。可选，默认 0 ，即不等待。<br> 其余逻辑同 <code>pre_wait_freezes</code>。</p></li><li><p><code>repeat</code>: <em>uint</em><br> 动作重复执行次数。可选，默认 1 ，即不重复。<br> 执行流程为 <code>action</code> - [<code>repeat_wait_freezes</code> - <code>repeat_delay</code> - <code>action</code>] × (repeat-1) 。</p></li><li><p><code>repeat_delay</code>: <em>uint</em><br> 每次重复动作之间的延迟，毫秒。可选，默认 0 。<br> 仅当 <code>repeat</code> &gt; 1 时生效，在第二次及之后的每次动作执行前等待。</p></li><li><p><code>repeat_wait_freezes</code>: <em>uint</em> | <em>object</em><br> 每次重复动作之间等待画面不动了的时间，毫秒。可选，默认 0 ，即不等待。<br> 仅当 <code>repeat</code> &gt; 1 时生效，在第二次及之后的每次动作执行前等待画面静止。<br> 若为 object，可设置更多参数，详见 <a href="#%E7%AD%89%E5%BE%85%E7%94%BB%E9%9D%A2%E9%9D%99%E6%AD%A2">等待画面静止</a>。</p></li><li><p><code>focus</code>: <em>any</em><br> 关注节点，会额外产生部分回调消息。可选，默认 null，不产生回调消息。<br> 详见 <a href="#%E8%8A%82%E7%82%B9%E9%80%9A%E7%9F%A5">节点通知</a>。</p></li><li><p><code>attach</code>: <em>object</em><br> 附加 JSON 对象，用于保存节点的附加配置。可选，默认空对象。<br> 该字段可用于存储自定义的配置信息，这些信息不会影响节点的执行逻辑，但可以通过相关接口获取。<br><strong>注意</strong>：该字段会与默认值中的 <code>attach</code> 进行字典合并（dict merge），而不是覆盖。即节点中的 <code>attach</code> 会与默认值中的 <code>attach</code> 合并，相同键的值会被节点中的值覆盖，但其他键会保留。</p></li></ul><p>一个节点的生命周期如下</p><div class="mermaid"></div><h3 id="pipeline-v2" tabindex="-1">Pipeline v2 <a class="header-anchor" href="#pipeline-v2" aria-label="Permalink to &quot;Pipeline v2&quot;">​</a></h3><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>MaaFW 自 v4.4.0 版本起支持 Pipeline v2 协议，同时兼容 v1。</p></div><p>相较 v1，主要将 <code>recognition</code> 和 <code>action</code> 相关字段放入了二级字典中（类型放入 <code>type</code> 字段，其余参数放入 <code>param</code> 字段中），其余并无不同。举例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 识别相关字段放入 recognition.param 中，键和值均无变化</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;roi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;param&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 动作相关字段放入 action.param 中，键和值均无变化</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XXX&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 非 recognition 和 action 的字段与 v1 无变化</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;pre_delay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="默认属性" tabindex="-1">默认属性 <a class="header-anchor" href="#默认属性" aria-label="Permalink to &quot;默认属性&quot;">​</a></h3><p>请参考 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/sample/resource/default_pipeline.json" target="_blank" rel="noopener noreferrer"><code>default_pipeline.json</code></a></p><p><code>default_pipeline.json</code> 用于为所有节点和特定算法/动作类型设置默认参数，减少重复配置。该文件会在资源加载时自动读取，其中的配置会作为基础默认值，被所有节点继承。</p><h4 id="配置结构" tabindex="-1">配置结构 <a class="header-anchor" href="#配置结构" aria-label="Permalink to &quot;配置结构&quot;">​</a></h4><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 通用字段的默认值，适用于所有节点</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;timeout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;pre_delay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // TemplateMatch 算法的默认参数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 可使用 v1 或 v2 格式</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v1 格式：直接写在根对象</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;threshold&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 或使用 v2 格式：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // &quot;recognition&quot;: { &quot;type&quot;: &quot;TemplateMatch&quot;, &quot;param&quot;: { &quot;threshold&quot;: 0.7 } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Click 动作的默认参数</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// v1 格式</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 或使用 v2 格式：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // &quot;action&quot;: { &quot;type&quot;: &quot;Click&quot;, &quot;param&quot;: { &quot;target&quot;: true } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="字段说明" tabindex="-1">字段说明 <a class="header-anchor" href="#字段说明" aria-label="Permalink to &quot;字段说明&quot;">​</a></h4><ul><li><code>Default</code> 对象：可设置所有 Pipeline 通用字段的默认值（如 <code>rate_limit</code>、<code>timeout</code>、<code>pre_delay</code>、<code>post_delay</code> 等）</li><li><strong>算法名称对象</strong>（如 <code>TemplateMatch</code>、<code>OCR</code>、<code>FeatureMatch</code> 等）：可设置对应识别算法类型的默认参数</li><li><strong>动作名称对象</strong>（如 <code>Click</code>、<code>Swipe</code>、<code>StartApp</code> 等）：可设置对应动作类型的默认参数</li></ul><h4 id="继承优先级" tabindex="-1">继承优先级 <a class="header-anchor" href="#继承优先级" aria-label="Permalink to &quot;继承优先级&quot;">​</a></h4><p>参数的优先级从高到低为：</p><ol><li>节点中直接定义的参数</li><li><code>default_pipeline.json</code> 中对应算法/动作类型的默认参数</li><li><code>default_pipeline.json</code> 中 <code>Default</code> 对象的默认参数</li><li>框架内置的默认值</li></ol><h4 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to &quot;使用示例&quot;">​</a></h4><p>假设 <code>default_pipeline.json</code> 配置如下：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;threshold&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在 Pipeline JSON 中：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // rate_limit 将继承 Default 中的 2000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // threshold 将继承 TemplateMatch 中的 0.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;threshold&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 覆盖默认值</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 覆盖默认值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h4><ul><li><code>default_pipeline.json</code> 应放置在资源包（Bundle）的根目录下，与 <code>pipeline</code> 文件夹同级</li><li>算法/动作对象的键名需与对应的算法/动作类型名称完全一致（如 <code>TemplateMatch</code>、<code>OCR</code>、<code>Click</code>），大小写敏感</li><li><code>attach</code> 字段会进行字典合并（dict merge）而非覆盖，即节点中的 <code>attach</code> 会与默认值中的 <code>attach</code> 合并</li><li>若不需要某项默认配置，只需在节点中显式设置为其他值即可覆盖</li></ul><h4 id="多-bundle-加载行为" tabindex="-1">多 Bundle 加载行为 <a class="header-anchor" href="#多-bundle-加载行为" aria-label="Permalink to &quot;多 Bundle 加载行为&quot;">​</a></h4><p>依次加载多个 Bundle 时：</p><ul><li>各 Bundle 的 <code>default_pipeline.json</code> 会按顺序合并（dict merge），后加载的同名字段会覆盖先加载的</li><li><strong>已加载的节点不会被后续 Bundle 的 <code>default_pipeline.json</code> 影响</strong></li><li>每个节点在首次加载时使用当时的合并后默认值，之后不再变化</li></ul><p><strong>示例：</strong> <code>Bundle_Base</code> → <code>Bundle_Debug</code></p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bundle_Base/default_pipeline.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bundle_Base/pipeline/main.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OCR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用 rate_limit: 2000</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bundle_Debug/default_pipeline.json  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;rate_limit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 覆盖默认值</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bundle_Debug/pipeline/debug.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OCR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用 rate_limit: 100</span></span></code></pre></div><p>加载后，<code>NodeA</code> 保持 <code>rate_limit: 2000</code>，<code>NodeB</code> 使用 <code>rate_limit: 100</code>。</p><h4 id="最佳实践-分离特殊配置" tabindex="-1">最佳实践：分离特殊配置 <a class="header-anchor" href="#最佳实践-分离特殊配置" aria-label="Permalink to &quot;最佳实践：分离特殊配置&quot;">​</a></h4><p>可将特殊配置的节点单独组织到一个 Bundle，配置专用的 <code>default_pipeline.json</code>，实现配置隔离。</p><p><strong>示例：</strong> 将调试节点分离到独立 Bundle</p><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaaResourcePostPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resource, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resource/base&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // base 节点使用 rate_limit: 2000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaaResourcePostPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resource, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resource/debug&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // debug 节点使用 rate_limit: 100</span></span></code></pre></div><p>由于已加载的节点不受后续默认值影响，<code>base</code> Bundle 的节点保持其原有配置，<code>debug</code> Bundle 的节点使用新的默认值。</p><h2 id="算法类型" tabindex="-1">算法类型 <a class="header-anchor" href="#算法类型" aria-label="Permalink to &quot;算法类型&quot;">​</a></h2><h3 id="directhit" tabindex="-1"><code>DirectHit</code> <a class="header-anchor" href="#directhit" aria-label="Permalink to &quot;`DirectHit`&quot;">​</a></h3><p>直接命中，即不进行识别，直接执行动作。</p><h3 id="templatematch" tabindex="-1"><code>TemplateMatch</code> <a class="header-anchor" href="#templatematch" aria-label="Permalink to &quot;`TemplateMatch`&quot;">​</a></h3><p>模板匹配，即“找图”。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 识别区域坐标。可选，默认 [0, 0, 0, 0] ，即全屏。</p><ul><li><em>array&lt;int, 4&gt;</em>: 识别区域坐标，[x, y, w, h]，若希望全屏可设为 [0, 0, 0, 0] 。</li><li><em>string</em>: 填写节点名，在之前执行过的某节点识别到的目标范围内识别。</li></ul></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>roi</code> 的基础上额外移动再作为范围，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>template</code>: <em>string</em> | <em>list&lt;string, &gt;</em><br> 模板图片路径，需要 <code>image</code> 文件夹的相对路径。必选。<br> 所使用的图片需要是无损原图缩放到 720p 后的裁剪。请参考 <a href="1.1-QuickStarted#%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6">这里</a>。<br> 支持填写文件夹路径，将递归加载其中所有图片文件。</p></li><li><p><code>threshold</code>: <em>double</em> | <em>list&lt;double, &gt;</em><br> 模板匹配阈值。可选，默认 0.7 。<br> 若为数组，长度需和 <code>template</code> 数组长度相同。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a>。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#score"><code>Score</code></a> | <a href="#random"><code>Random</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li><li><p><code>method</code>: <em>int</em><br> 模板匹配算法，即 cv::TemplateMatchModes。可选，默认 5 。<br> 详情请参考 <a href="https://docs.opencv.org/4.x/df/dfb/group__imgproc__object.html" target="_blank" rel="noopener noreferrer">OpenCV 官方文档</a>。<br><em>10001 为 TM_SQDIFF_NORMED 的反转版本，分数越高越匹配（与原版相反）。</em></p><table tabindex="0"><thead><tr><th>method</th><th>算法名称</th><th>速度</th><th>颜色敏感度</th><th>光照鲁棒性</th><th>适用场景</th></tr></thead><tbody><tr><td>10001</td><td>TM_SQDIFF_NORMED (Inverted)</td><td>快</td><td>敏感</td><td>差</td><td>精确匹配，阈值易设定</td></tr><tr><td>3</td><td>TM_CCORR_NORMED</td><td>中等</td><td>敏感</td><td>中</td><td>模板较亮时效果好</td></tr><tr><td>5</td><td>TM_CCOEFF_NORMED</td><td>较慢</td><td>不敏感</td><td>好</td><td><strong>推荐</strong>，阈值易设定</td></tr></tbody></table></li><li><p><code>green_mask</code>: <em>bool</em><br> 是否进行绿色掩码。可选，默认 false 。<br> 若为 true，可以将图片中不希望匹配的部分涂绿 RGB: (0, 255, 0)，则不对绿色部分进行匹配。<br> 注意：算法本身具有较强鲁棒性，常规背景变化通常无需使用此功能。若确需使用，应仅遮盖干扰区域，避免过度涂抹导致主体边缘特征丢失。</p></li></ul><h3 id="featurematch" tabindex="-1"><code>FeatureMatch</code> <a class="header-anchor" href="#featurematch" aria-label="Permalink to &quot;`FeatureMatch`&quot;">​</a></h3><p>特征匹配，泛化能力更强的“找图”，具有抗透视、抗尺寸变化等特点。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code> 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li><li><p><code>template</code>: <em>string</em> | <em>list&lt;string, &gt;</em><br> 模板图片路径，需要 <code>image</code> 文件夹的相对路径。必选。 支持填写文件夹路径，将递归加载其中所有图片文件。<br> 注意事项：</p><ul><li>模板图片不宜过小，建议至少 64x64 像素，否则特征点过少可能导致匹配失败或误匹配。</li><li>模板应包含足够的纹理细节（如边缘、角点），纯色或渐变区域特征点稀少。</li><li>避免模板中包含大量重复纹理（如格子、条纹），可能导致特征点匹配混乱。</li></ul></li><li><p><code>count</code>: <em>uint</em><br> 匹配的特征点的最低数量要求（阈值）。可选，默认 4 。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a> 。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#score"><code>Score</code></a> | <a href="#area"><code>Area</code></a> | <a href="#random"><code>Random</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li><li><p><code>green_mask</code>: <em>bool</em><br> 是否进行绿色掩码。可选，默认 false 。<br> 若为 true，可以将图片中不希望匹配的部分涂绿 RGB: (0, 255, 0)，则不对绿色部分进行匹配。<br> 注意：算法本身具有较强的鲁棒性，一般背景变化无需使用此功能。若确需使用，应仅遮盖干扰区域，避免过度涂抹导致主体边缘特征丢失。</p></li><li><p><code>detector</code>: <em>string</em><br> 特征检测器。可选，默认 <code>SIFT</code> 。</p><table tabindex="0"><thead><tr><th>检测器</th><th>速度</th><th>尺度不变性</th><th>旋转不变性</th><th>精度</th><th>适用场景</th></tr></thead><tbody><tr><td>SIFT</td><td>慢</td><td>有</td><td>有</td><td>最高</td><td><strong>推荐</strong>，对精度要求高的场景</td></tr><tr><td>KAZE</td><td>较慢</td><td>有</td><td>有</td><td>高</td><td>2D/3D 图像，边缘保持好</td></tr><tr><td>AKAZE</td><td>中等</td><td>有</td><td>有</td><td>较高</td><td>速度与精度平衡</td></tr><tr><td>BRISK</td><td>快</td><td>有</td><td>有</td><td>中等</td><td>实时性要求高的场景</td></tr><tr><td>ORB</td><td>最快</td><td><strong>无</strong></td><td>有</td><td>较低</td><td>模板与目标尺寸一致时使用</td></tr></tbody></table></li><li><p><code>ratio</code>: <em>double</em><br> KNN 匹配算法的距离比值，[0 - 1.0] , 越大则匹配越宽松（更容易连线）。可选，默认 0.6 。</p></li></ul><h3 id="colormatch" tabindex="-1"><code>ColorMatch</code> <a class="header-anchor" href="#colormatch" aria-label="Permalink to &quot;`ColorMatch`&quot;">​</a></h3><p>颜色匹配，即“找色”。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code> 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li><li><p><code>method</code>: <em>int</em><br> 颜色匹配方式。即 cv::ColorConversionCodes。可选，默认 4 (RGB) 。<br> 常用值：4 (RGB, 3 通道), 40 (HSV, 3 通道), 6 (GRAY, 1 通道)。<br> 详情请参考 <a href="https://docs.opencv.org/4.x/d8/d01/group__imgproc__color__conversions.html" target="_blank" rel="noopener noreferrer">OpenCV 官方文档</a>。</p></li><li><p><code>lower</code>: <em>list&lt;int, &gt;</em> | <em>list&lt;list&lt;int, &gt;&gt;</em><br> 颜色下限值。必选。最内层 list 长度需和 <code>method</code> 的通道数一致。</p></li><li><p><code>upper</code>: <em>list&lt;int, &gt;</em> | <em>list&lt;list&lt;int, &gt;&gt;</em><br> 颜色上限值。必选。最内层 list 长度需和 <code>method</code> 的通道数一致。</p></li><li><p><code>count</code>: <em>uint</em><br> 符合的像素点的最低数量要求（阈值）。可选，默认 1。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a> 。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#score"><code>Score</code></a> | <a href="#area"><code>Area</code></a> | <a href="#random"><code>Random</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li><li><p><code>connected</code>: <em>bool</em><br> 是否是相连的点才会被计数。可选，默认 false 。<br> 若为是，在完成颜色过滤后，则只会计数像素点 <strong>全部相连</strong> 的最大块。<br> 若为否，则不考虑这些像素点是否相连。</p></li></ul><h3 id="ocr" tabindex="-1"><code>OCR</code> <a class="header-anchor" href="#ocr" aria-label="Permalink to &quot;`OCR`&quot;">​</a></h3><p>文字识别。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code> 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li><li><p><code>expected</code>: <em>string</em> | <em>list&lt;string, &gt;</em><br> 期望的结果，支持正则。可选，默认匹配所有结果。</p></li><li><p><code>threshold</code>: <em>double</em><br> 模型置信度阈值。可选，默认 0.3 。</p></li><li><p><code>replace</code>: <em>array&lt;string, 2&gt;</em> | <em>list&lt;array&lt;string, 2&gt;&gt;</em><br> 部分文字识别结果不准确，进行替换。可选。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a>。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#area"><code>Area</code></a> | <a href="#length"><code>Length</code></a> | <a href="#random"><code>Random</code></a> | <a href="#expected"><code>Expected</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li><li><p><code>only_rec</code>: <em>bool</em><br> 是否仅识别（不进行检测，需要精确设置 <code>roi</code>）。可选，默认 false 。</p></li><li><p><code>model</code>: <em>string</em><br> 模型 <strong>文件夹</strong> 路径。使用 <code>model/ocr</code> 文件夹的相对路径。可选，默认为空。<br> 若为空，则为 <code>model/ocr</code> 根目录下的模型文件。<br> 文件夹中需要包含 <code>rec.onnx</code>, <code>det.onnx</code>, <code>keys.txt</code> 三个文件。</p></li></ul><h3 id="neuralnetworkclassify" tabindex="-1"><code>NeuralNetworkClassify</code> <a class="header-anchor" href="#neuralnetworkclassify" aria-label="Permalink to &quot;`NeuralNetworkClassify`&quot;">​</a></h3><p>深度学习分类，判断图像中的 <strong>固定位置</strong> 是否为预期的“类别”。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code> 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li><li><p><code>labels</code>: <em>list&lt;string, &gt;</em><br> 标注，即每个分类的名字。可选。<br> 仅影响调试图片及日志等，若未填写则会填充 &quot;Unknown&quot; 。</p></li><li><p><code>model</code>: <em>string</em><br> 模型文件路径。使用 <code>model/classify</code> 文件夹的相对路径。必选。<br> 目前仅支持 ONNX 模型，参考 <a href="https://github.com/MaaXYZ/MaaNeuralNetworkCookbook/tree/main/NeuralNetworkClassify" target="_blank" rel="noopener noreferrer">NNClassify 食谱</a>。</p></li><li><p><code>expected</code>: <em>int</em> | <em>list&lt;int, &gt;</em><br> 期望的分类下标。可选，默认匹配所有结果。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a> 。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#score"><code>Score</code></a> | <a href="#random"><code>Random</code></a> | <a href="#expected"><code>Expected</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li></ul><p>举例：例如画面中 <strong>固定位置</strong> 可能出现 猫、狗、老鼠，我们训练了支持该三分类的模型。<br> 希望识别到 猫 或 老鼠 才点击，而识别到 狗 不点击，则相关字段为：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;labels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Dog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mouse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>注意这些值需要与模型实际输出相符。</p><h3 id="neuralnetworkdetect" tabindex="-1"><code>NeuralNetworkDetect</code> <a class="header-anchor" href="#neuralnetworkdetect" aria-label="Permalink to &quot;`NeuralNetworkDetect`&quot;">​</a></h3><p>深度学习目标检测，高级版“找图”。</p><p>与分类器主要区别在于“找”，即支持任意位置。但通常来说模型复杂度会更高，需要更多的训练集、训练时间，使用时的资源占用（推理开销）也会成倍上涨。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code> 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li><li><p><code>labels</code>: <em>list&lt;string, &gt;</em><br> 标注，即每个分类的名字。可选。<br> 仅影响调试图片及日志等。若未填写，会自动从模型 metadata 中读取（支持从 <code>names</code>、<code>name</code>、<code>labels</code>、<code>class_names</code> 字段读取），一般无需手动设置。若模型 metadata 中也没有，则会填充 &quot;Unknown&quot; 。</p></li><li><p><code>model</code>: <em>string</em><br> 模型文件路径。使用 <code>model/detect</code> 文件夹的相对路径。必选。<br> 目前支持由 YOLOv8 和 YOLOv11 导出的 ONNX 格式的模型，其他同样输入输出的 YOLO 模型理论上也可以支持，但未经测试。<br> 训练参考 <a href="https://github.com/MaaXYZ/MaaNeuralNetworkCookbook/tree/main/NeuralNetworkDetect" target="_blank" rel="noopener noreferrer">NNDetect 食谱</a>。</p></li><li><p><code>expected</code>: <em>int</em> | <em>list&lt;int, &gt;</em><br> 期望的分类下标。可选，默认匹配所有结果。</p></li><li><p><code>threshold</code>: <em>double</em> | <em>list&lt;double, &gt;</em><br> 模型置信度阈值。可选，默认 0.3 。<br> 若为数组，长度需和 <code>expected</code> 数组长度相同。</p></li><li><p><code>order_by</code>: <em>string</em><br> 结果排序方式。可选，默认 <a href="#horizontal"><code>Horizontal</code></a> 。<br> 可选的值：<a href="#horizontal"><code>Horizontal</code></a> | <a href="#vertical"><code>Vertical</code></a> | <a href="#score"><code>Score</code></a> | <a href="#area"><code>Area</code></a> | <a href="#random"><code>Random</code></a> | <a href="#expected"><code>Expected</code></a> 。<br> 可结合 <code>index</code> 字段使用。</p></li><li><p><code>index</code>: <em>int</em><br> 命中第几个结果。可选，默认 0 。<br> 假设共有 N 个结果，则 <code>index</code> 的取值范围为 [-N, N - 1] ，其中负数使用类 Python 的规则转换为 N - index 。若超出范围，则视为当前识别无结果。</p></li></ul><p>举例：例如画面中可能出现 猫、狗、老鼠，我们训练了支持该三分类的检测模型。<br> 希望检测到 猫 或 老鼠 才点击，而识别到 狗 不点击，则相关字段为：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;labels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Dog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mouse&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;expected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>注意这些值需要与模型实际输出相符。</p><h3 id="and" tabindex="-1"><code>And</code> <a class="header-anchor" href="#and" aria-label="Permalink to &quot;`And`&quot;">​</a></h3><p>组合识别（逻辑与）。所有子识别都命中才算成功。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>all_of</code>: <em>list&lt;object,&gt;</em><br> 子识别列表。所有子识别都命中才算成功。必选。<br> 列表元素写法与普通节点的 <code>recognition</code> 一致（兼容 v1/v2，允许混用）。</p></li><li><p><code>box_index</code>: <em>int</em><br> 指定输出哪个子识别的识别框（box）作为当前节点的识别框。可选，默认 0。<br> 需要满足 <code>0 &lt;= box_index &lt; all_of.size</code>。</p></li><li><p><code>sub_name</code>: <em>string</em><br> 子识别别名。可选。<br> 后续子识别可通过 <code>roi: sub_name</code> 引用之前子识别的 <code>filtered</code> 作为 ROI；同名以最后一个为准。<br> 仅当前节点内有效。</p></li></ul><p>示例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;And&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;all_of&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;sub_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;threshold&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.7</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OCR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;roi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;roi_offset&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;expected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;box_index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Pipeline v2 时，将这些字段放到 <code>recognition.param</code> 中即可。</p><h3 id="or" tabindex="-1"><code>Or</code> <a class="header-anchor" href="#or" aria-label="Permalink to &quot;`Or`&quot;">​</a></h3><p>组合识别（逻辑或）。命中第一个即成功，后续不再识别。</p><p>该算法属性需额外部分字段：</p><ul><li><code>any_of</code>: <em>list&lt;object,&gt;</em><br> 子识别列表。命中第一个即成功，后续不再识别。必选。<br> 列表元素写法与普通节点的 <code>recognition</code> 一致（兼容 v1/v2，允许混用）。</li></ul><p>示例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Or&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;any_of&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;TemplateMatch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;确定.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;recognition&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OCR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;expected&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OK&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;确定&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Pipeline v2 时，将这些字段放到 <code>recognition.param</code> 中即可。</p><h3 id="custom" tabindex="-1"><code>Custom</code> <a class="header-anchor" href="#custom" aria-label="Permalink to &quot;`Custom`&quot;">​</a></h3><p>执行通过 <code>MaaResourceRegisterCustomRecognition</code> 接口传入的识别器句柄。</p><p>该算法属性需额外部分字段：</p><ul><li><p><code>custom_recognition</code>: <em>string</em><br> 识别名，同注册接口传入的识别名。同时会通过 <code>MaaCustomRecognitionCallback</code>.<code>custom_recognition_name</code> 传出。必选。</p></li><li><p><code>custom_recognition_param</code>: <em>any</em><br> 识别参数，任意类型，会通过 <code>MaaCustomRecognitionCallback</code>.<code>custom_recognition_param</code> 传出。可选，默认 <code>null</code> 。</p></li><li><p><code>roi</code>: <em>array&lt;int, 4&gt;</em> | <em>string</em><br> 同 <code>TemplateMatch</code>.<code>roi</code>，会通过 <code>MaaCustomRecognitionCallback</code>.<code>roi</code> 传出。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>roi_offset</code>: <em>array&lt;int, 4&gt;</em><br> 同 <code>TemplateMatch</code>.<code>roi_offset</code> 。</p></li></ul><h2 id="动作类型" tabindex="-1">动作类型 <a class="header-anchor" href="#动作类型" aria-label="Permalink to &quot;动作类型&quot;">​</a></h2><h3 id="donothing" tabindex="-1"><code>DoNothing</code> <a class="header-anchor" href="#donothing" aria-label="Permalink to &quot;`DoNothing`&quot;">​</a></h3><p>什么都不做。</p><h3 id="click" tabindex="-1"><code>Click</code> <a class="header-anchor" href="#click" aria-label="Permalink to &quot;`Click`&quot;">​</a></h3><p>点击。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>target</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 点击目标的位置。可选，默认 true 。</p><ul><li><em>true</em>: 目标为本节点中刚刚识别到的位置（即自身）。</li><li><em>string</em>: 填写节点名，目标为之前执行过的某节点识别到的位置。</li><li><em>array&lt;int, 2&gt;</em>: 固定坐标点 <code>[x, y]</code>。</li><li><em>array&lt;int, 4&gt;</em>: 固定坐标区域 <code>[x, y, w, h]</code>，会在矩形内随机选取一点（越靠近中心概率越高，边缘概率相对较低），若希望全屏可设为 [0, 0, 0, 0] 。</li></ul></li><li><p><code>target_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>target</code> 的基础上额外移动再作为点击目标，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。</p><ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）</li></ul></li><li><p><code>pressure</code>: <em>int</em><br> 触点力度。可选，默认 1 。</p></li></ul><h3 id="longpress" tabindex="-1"><code>LongPress</code> <a class="header-anchor" href="#longpress" aria-label="Permalink to &quot;`LongPress`&quot;">​</a></h3><p>长按。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>target</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 长按目标的位置。可选，默认 true 。值同上述 <code>Click</code>.<code>target</code> 。</p></li><li><p><code>target_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>target</code> 的基础上额外移动再作为长按目标，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>duration</code>: <em>uint</em><br> 长按持续时间，单位毫秒。可选，默认 1000 。</p></li><li><p><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。</p><ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）</li></ul></li><li><p><code>pressure</code>: <em>int</em><br> 触点力度。可选，默认 1 。</p></li></ul><h3 id="swipe" tabindex="-1"><code>Swipe</code> <a class="header-anchor" href="#swipe" aria-label="Permalink to &quot;`Swipe`&quot;">​</a></h3><p>线性滑动。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>begin</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 滑动起点。可选，默认 true 。值同上述 <code>Click</code>.<code>target</code> 。</p></li><li><p><code>begin_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>begin</code> 的基础上额外移动再作为起点，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>end</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em> | <em>list&lt;true | string | array&lt;int, 2&gt; | array&lt;int, 4&gt;&gt;</em><br> 滑动终点。可选，默认 true 。值同上述 <code>Click</code>.<code>target</code> 。<br> 💡 v4.5.x 版本新增支持 <em>list</em>，可用于添加滑动途径点！相较多次 swipe 的区别是多个 end 之间不会抬手，即一次折线滑动。</p></li><li><p><code>end_offset</code>: <em>array&lt;int, 4&gt;</em> | <em>list&lt;array&lt;int, 4&gt;&gt;</em><br> 在 <code>end</code> 的基础上额外移动再作为终点，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>duration</code>: <em>uint</em> | <em>list&lt;uint,&gt;</em><br> 滑动持续时间，单位毫秒。可选，默认 200 。</p></li><li><p><code>end_hold</code>: <em>uint</em> | <em>list&lt;uint,&gt;</em><br> 滑动到终点后，额外等待一定时间再抬起，单位 ms。可选，默认 0。</p></li><li><p><code>only_hover</code>: <em>bool</em><br> 仅鼠标悬停移动，无按下/抬起动作。可选，默认 false。</p></li><li><p><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。</p><ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）</li></ul></li><li><p><code>pressure</code>: <em>int</em><br> 触点力度。可选，默认 1 。</p></li></ul><h3 id="multiswipe" tabindex="-1"><code>MultiSwipe</code> <a class="header-anchor" href="#multiswipe" aria-label="Permalink to &quot;`MultiSwipe`&quot;">​</a></h3><p>多指线性滑动。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>swipes</code>: <em>list&lt;object,&gt;</em><br> 多个滑动的数组。必选。<br> 数组元素顺序没有影响，只基于 <code>starting</code> 确定顺序。</p><ul><li><p><code>starting</code>: <em>uint</em><br> 滑动起始时间，单位毫秒。可选，默认 0 。<br><code>MultiSwipe</code> 额外字段，该滑动会在本 action 中第 <code>starting</code> 毫秒才开始。</p></li><li><p><code>begin</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 滑动起点。可选，默认 true 。值同上述 <code>Click</code>.<code>target</code> 。</p></li><li><p><code>begin_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>begin</code> 的基础上额外移动再作为起点，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>end</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em> | <em>list&lt;true | string | array&lt;int, 2&gt; | array&lt;int, 4&gt;&gt;</em><br> 滑动终点。可选，默认 true 。值同上述 <code>Click</code>.<code>target</code> 。<br> 💡 v4.5.x 版本新增支持 <em>list</em>，可用于添加滑动途径点！相较多次 swipe 的区别是多个 end 之间不会抬手，即一次折线滑动。</p></li><li><p><code>end_offset</code>: <em>array&lt;int, 4&gt;</em> | <em>list&lt;array&lt;int, 4&gt;&gt;</em><br> 在 <code>end</code> 的基础上额外移动再作为终点，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>duration</code>: <em>uint</em> | <em>list&lt;uint,&gt;</em><br> 滑动持续时间，单位毫秒。可选，默认 200 。</p></li><li><p><code>end_hold</code>: <em>uint</em> | <em>list&lt;uint,&gt;</em><br> 滑动到终点后，额外等待一定时间再抬起，单位 ms。可选，默认 0。</p></li><li><p><code>only_hover</code>: <em>bool</em><br> 仅鼠标悬停移动，无按下/抬起动作。可选，默认 false。</p></li><li><p><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。</p><ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）<br><strong>注意</strong>：在 <code>MultiSwipe</code> 中，如果 <code>contact</code> 为 0，将使用该滑动在数组中的索引作为触点编号。</li></ul></li><li><p><code>pressure</code>: <em>int</em><br> 触点力度。可选，默认 1 。</p></li></ul></li></ul><p>举例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MultiSwipe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;swipes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;begin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;starting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;begin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="touchdown" tabindex="-1"><code>TouchDown</code> <a class="header-anchor" href="#touchdown" aria-label="Permalink to &quot;`TouchDown`&quot;">​</a></h3><p>按下触控点。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。</p><ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）</li></ul></li><li><p><code>target</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 4&gt;</em> | <em>array&lt;int, 2&gt;</em><br> 触控目标的位置。可选，默认 true ，取值含义同 <code>Click</code>.<code>target</code> 。</p></li><li><p><code>target_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>target</code> 的基础上额外移动再作为触控目标，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>pressure</code>: <em>int</em><br> 触控压力，范围取决于控制器实现。可选，默认 0 。</p></li></ul><h3 id="touchmove" tabindex="-1"><code>TouchMove</code> <a class="header-anchor" href="#touchmove" aria-label="Permalink to &quot;`TouchMove`&quot;">​</a></h3><p>移动触控点。字段含义与 <code>TouchDown</code> 一致，用于更新触点位置。</p><h3 id="touchup" tabindex="-1"><code>TouchUp</code> <a class="header-anchor" href="#touchup" aria-label="Permalink to &quot;`TouchUp`&quot;">​</a></h3><p>抬起触控点。</p><ul><li><code>contact</code>: <em>uint</em><br> 触点编号，用于区分不同的触控点。可选，默认 0 。 <ul><li>Adb 控制器：表示手指编号（0 为第一根手指，1 为第二根手指，以此类推）</li><li>Win32 控制器：表示鼠标按键编号（0 为左键，1 为右键，2 为中键，3 为 XBUTTON1，4 为 XBUTTON2）</li></ul></li></ul><h3 id="scroll" tabindex="-1"><code>Scroll</code> <a class="header-anchor" href="#scroll" aria-label="Permalink to &quot;`Scroll`&quot;">​</a></h3><p>鼠标滚轮滚动。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>dx</code>: <em>int</em><br> 水平滚动距离，正值向右滚动，负值向左滚动。可选，默认 0 。</p></li><li><p><code>dy</code>: <em>int</em><br> 垂直滚动距离，正值向上滚动，负值向下滚动。可选，默认 0 。</p></li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><ul><li>Adb 控制器和 PlayCover 控制器不支持滚动操作。仅 Win32 控制器支持。</li><li><code>dx</code>/<code>dy</code> 的值会直接作为滚动增量发送。Windows 标准滚轮每格增量为 120（WHEEL_DELTA），建议使用 120 的整数倍以获得最佳兼容性。</li></ul></div><h3 id="clickkey" tabindex="-1"><code>ClickKey</code> <a class="header-anchor" href="#clickkey" aria-label="Permalink to &quot;`ClickKey`&quot;">​</a></h3><p>单击按键。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>key</code>: <em>int</em> | <em>list&lt;int, &gt;</em><br> 要单击的键，仅支持对应控制器的虚拟按键码。必选。</p><ul><li><a href="https://developer.android.com/reference/android/view/KeyEvent" target="_blank" rel="noopener noreferrer">Adb 控制器</a></li><li><a href="https://learn.microsoft.com/en-us/windows/win32/inputdev/virtual-key-codes" target="_blank" rel="noopener noreferrer">Win32 控制器</a></li></ul></li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>PlayCover 控制器不支持按键操作。</p></div><h3 id="longpresskey" tabindex="-1"><code>LongPressKey</code> <a class="header-anchor" href="#longpresskey" aria-label="Permalink to &quot;`LongPressKey`&quot;">​</a></h3><p>长按按键。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>key</code>: <em>int</em> | <em>list&lt;int, &gt;</em><br> 要按的键，仅支持对应控制器的虚拟按键码。必选。</p></li><li><p><code>duration</code>: <em>uint</em><br> 长按持续时间，单位毫秒。可选，默认 1000 。</p></li></ul><h3 id="keydown" tabindex="-1"><code>KeyDown</code> <a class="header-anchor" href="#keydown" aria-label="Permalink to &quot;`KeyDown`&quot;">​</a></h3><p>按下按键但不立即松开。可与 <code>KeyUp</code> 配合实现自定义按键时序。</p><p>该动作属性需额外部分字段：</p><ul><li><code>key</code>: <em>int</em><br> 要按下的键，仅支持对应控制器的虚拟按键码。必选。</li></ul><h3 id="keyup" tabindex="-1"><code>KeyUp</code> <a class="header-anchor" href="#keyup" aria-label="Permalink to &quot;`KeyUp`&quot;">​</a></h3><p>松开按键。用于结束 <code>KeyDown</code> 建立的按键状态。</p><p>该动作属性需额外部分字段：</p><ul><li><code>key</code>: <em>int</em><br> 要松开的键，仅支持对应控制器的虚拟按键码。必选。</li></ul><h3 id="inputtext" tabindex="-1"><code>InputText</code> <a class="header-anchor" href="#inputtext" aria-label="Permalink to &quot;`InputText`&quot;">​</a></h3><p>输入文本。</p><p>该动作属性需额外部分字段：</p><ul><li><code>input_text</code>: <em>string</em><br> 要输入的文本，部分控制器仅支持 ascii 。必选。</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>PlayCover 控制器不支持文本输入。</p></div><h3 id="startapp" tabindex="-1"><code>StartApp</code> <a class="header-anchor" href="#startapp" aria-label="Permalink to &quot;`StartApp`&quot;">​</a></h3><p>启动 App 。</p><p>该动作属性需额外部分字段：</p><ul><li><code>package</code>: <em>string</em><br> 启动入口。必选。<br> 需要填入 package name 或 activity ，例如 <code>com.hypergryph.arknights</code> 或 <code>com.hypergryph.arknights/com.u8.sdk.U8UnityContext</code> 。</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>PlayCover 控制器不支持启动应用，需要手动在 PlayCover 中启动。</p></div><h3 id="stopapp" tabindex="-1"><code>StopApp</code> <a class="header-anchor" href="#stopapp" aria-label="Permalink to &quot;`StopApp`&quot;">​</a></h3><p>关闭 App 。</p><p>该动作属性需额外部分字段：</p><ul><li><code>package</code>: <em>string</em><br> 要关闭的程序。必选。<br> 需要填入 package name ，例如 <code>com.hypergryph.arknights</code> 。</li></ul><h3 id="stoptask" tabindex="-1"><code>StopTask</code> <a class="header-anchor" href="#stoptask" aria-label="Permalink to &quot;`StopTask`&quot;">​</a></h3><p>停止当前任务链（MaaTaskerPostTask 传入的单个任务链）。</p><h3 id="command" tabindex="-1"><code>Command</code> <a class="header-anchor" href="#command" aria-label="Permalink to &quot;`Command`&quot;">​</a></h3><p>执行命令。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>exec</code>: <em>string</em><br> 执行的程序路径。必选。</p></li><li><p><code>args</code>: <em>list&lt;string,&gt;</em><br> 执行的参数。可选。<br> 支持部分运行期参数替换：</p><ul><li><code>{ENTRY}</code>: 任务入口名。</li><li><code>{NODE}</code>: 当前节点名。</li><li><code>{IMAGE}</code>: 截图保存到文件的路径。该文件在进程退出前删除，若要持久保存请自行复制。</li><li><code>{BOX}</code>: 识别命中的目标，格式为 <code>[x, y, w, h]</code>。</li><li><code>{RESOURCE_DIR}</code>: 最后一次加载的资源文件夹路径。</li><li><code>{LIBRARY_DIR}</code>: MaaFW 库所在的文件夹路径。</li></ul></li><li><p><code>detach</code>: <em>bool</em><br> 分离子进程，即不等待子进程执行完成，直接继续执行后面的任务。可选，默认 false。</p></li></ul><p>举例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;exec&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;{RESOURCE_DIR}/my_script/test.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;Haha&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;{IMAGE}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;{NODE}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;{BOX}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;NodeB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;exec&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{RESOURCE_DIR}/my_exec/my_exec.exe&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>实际将会执行命令</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NodeA</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C:/MaaXXX/resource/my_script/test.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Haha</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> C:/temp/123.png</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NodeA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [0,0,0,0]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NodeB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">C:/MaaXXX/resource/my_exec/my_exec.exe</span></span></code></pre></div><h3 id="shell" tabindex="-1"><code>Shell</code> <a class="header-anchor" href="#shell" aria-label="Permalink to &quot;`Shell`&quot;">​</a></h3><p>在 ADB 设备上执行 shell 命令。</p><p>该动作属性需额外部分字段：</p><ul><li><code>cmd</code>: <em>string</em><br> 要执行的 shell 命令。必选。<br> 例如 <code>getprop ro.build.version.sdk</code> 或 <code>settings put global animator_duration_scale 0</code>。</li></ul><blockquote><p>注意：此动作仅对 ADB 控制器有效。命令输出可以通过 <code>MaaTaskerGetActionDetail</code> 在动作详情中获取。</p></blockquote><h3 id="custom-1" tabindex="-1"><code>Custom</code> <a class="header-anchor" href="#custom-1" aria-label="Permalink to &quot;`Custom`&quot;">​</a></h3><p>执行通过 <code>MaaResourceRegisterCustomAction</code> 接口传入的动作句柄。</p><p>该动作属性需额外部分字段：</p><ul><li><p><code>custom_action</code>: <em>string</em><br> 动作名，同注册接口传入的识别器名。同时会通过 <code>MaaCustomActionCallback</code>.<code>custom_action_name</code> 传出。必选。</p></li><li><p><code>custom_action_param</code>: <em>any</em><br> 动作参数，任意类型，会通过 <code>MaaCustomActionCallback</code>.<code>custom_action_param</code> 传出。可选，默认 <code>null</code> 。</p></li><li><p><code>target</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 目标的位置，会通过 <code>MaaCustomActionCallback</code>.<code>box</code> 传出。可选，默认 true 。值同 <code>Click</code>.<code>target</code>，</p></li><li><p><code>target_offset</code>: <em>array&lt;int, 4&gt;</em><br> 值同 <code>Click</code>.<code>target_offset</code> 。</p></li></ul><h2 id="节点属性" tabindex="-1">节点属性 <a class="header-anchor" href="#节点属性" aria-label="Permalink to &quot;节点属性&quot;">​</a></h2><p>节点属性（Node Attributes）允许在 <code>next</code> 和 <code>on_error</code> 列表中为每个节点指定额外的行为控制参数。自 v5.1 版本起，支持通过两种语法形式设置节点属性。</p><h3 id="基本语法" tabindex="-1">基本语法 <a class="header-anchor" href="#基本语法" aria-label="Permalink to &quot;基本语法&quot;">​</a></h3><p>默认情况下，节点列表仅包含节点名称：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;D&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="属性设置方式" tabindex="-1">属性设置方式 <a class="header-anchor" href="#属性设置方式" aria-label="Permalink to &quot;属性设置方式&quot;">​</a></h3><h4 id="对象形式-object-form" tabindex="-1">对象形式（Object Form） <a class="header-anchor" href="#对象形式-object-form" aria-label="Permalink to &quot;对象形式（Object Form）&quot;">​</a></h4><p>使用 <code>NodeAttr</code> 对象显式指定节点名称和属性：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                &quot;jump_back&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;D&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="前缀形式-prefix-form" tabindex="-1">前缀形式（Prefix Form） <a class="header-anchor" href="#前缀形式-prefix-form" aria-label="Permalink to &quot;前缀形式（Prefix Form）&quot;">​</a></h4><p>使用方括号前缀在节点名称前直接指定属性：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;[JumpBack]C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;D&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>两种形式功能等价，可根据实际需求选择。在数组中可混合使用两种形式，构成异质数组。</p><h3 id="可用属性" tabindex="-1">可用属性 <a class="header-anchor" href="#可用属性" aria-label="Permalink to &quot;可用属性&quot;">​</a></h3><h4 id="jump-back-jumpback" tabindex="-1"><code>jump_back</code> / <code>[JumpBack]</code> <a class="header-anchor" href="#jump-back-jumpback" aria-label="Permalink to &quot;`jump_back` / `[JumpBack]`&quot;">​</a></h4><p><strong>类型</strong>: <em>boolean</em><br><strong>默认值</strong>: <code>false</code><br><strong>说明</strong>: 启用跳回机制。当该节点识别命中，系统会在其后续节点链全部执行完毕后，重新返回到该节点所在的父节点，继续尝试识别该父节点的 <code>next</code> 列表。</p><p><strong>执行流程</strong>：</p><ol><li>父节点按顺序识别 <code>next</code> 列表中的节点</li><li>若识别命中带有 <code>jump_back</code> 属性的节点，执行该节点及其后续节点链</li><li>该节点链执行完毕后，返回到父节点</li><li>父节点继续从 <code>next</code> 列表的起始位置重新开始识别</li></ol><p><strong>示例</strong>：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;[JumpBack]D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;E&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>执行流程：</p><ul><li>节点 A 依次尝试识别 B、C、D、E</li><li>若识别命中 D（假设 B、C 未识别到），执行 D 及其后续节点链</li><li>D 的节点链执行完毕后，返回到节点 A</li><li>节点 A 重新从 B 开始识别，继续尝试 B、C、D、E</li></ul><p><strong>应用场景</strong>：<br> 适用于异常处理场景，例如识别并处理网络断开提示框、权限请求弹窗等临时性界面，处理完成后继续执行原有流程。</p><p><strong>兼容性说明</strong>：<br> 功能类似已废弃的 <code>is_sub</code> 字段，但 <code>jump_back</code> 仅作用于当前 <code>next</code> 列表中的特定节点，而非整个节点定义。</p><div class="mermaid"></div><h4 id="anchor-anchor" tabindex="-1"><code>anchor</code> / <code>[Anchor]</code> <a class="header-anchor" href="#anchor-anchor" aria-label="Permalink to &quot;`anchor` / `[Anchor]`&quot;">​</a></h4><p><strong>类型</strong>: <em>boolean</em><br><strong>默认值</strong>: <code>false</code><br><strong>说明</strong>: 启用锚点引用。当该属性为 true 时，<code>name</code> 字段将被视为锚点名称而非节点名称，运行时会解析为最后设置该锚点的节点。</p><p><strong>使用方式</strong>：</p><ol><li>首先在节点中通过 <code>anchor</code> 字段设置锚点名称</li><li>然后在 <code>next</code> 或 <code>on_error</code> 中通过 <code>[Anchor]</code> 或 <code>anchor</code> 引用该锚点</li></ol><p><strong>示例</strong>：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;[Anchor]X&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>等价的对象形式：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;next&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;D&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;X&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;anchor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>应用场景</strong>：<br> 适用于需要动态引用节点的场景，例如多个节点可能处理同一类事件，后续需要回到&quot;最后处理该事件的节点&quot;继续执行。</p><h3 id="未来扩展" tabindex="-1">未来扩展 <a class="header-anchor" href="#未来扩展" aria-label="Permalink to &quot;未来扩展&quot;">​</a></h3><p>更多节点属性功能正在规划中，将在后续版本中逐步推出。</p><h2 id="结果排序方式" tabindex="-1">结果排序方式 <a class="header-anchor" href="#结果排序方式" aria-label="Permalink to &quot;结果排序方式&quot;">​</a></h2><p>识别算法可能返回多个结果，通过 <code>order_by</code> 字段指定排序方式，再结合 <code>index</code> 字段选取特定结果。</p><h3 id="horizontal" tabindex="-1"><code>Horizontal</code> <a class="header-anchor" href="#horizontal" aria-label="Permalink to &quot;`Horizontal`&quot;">​</a></h3><p>按水平方向排序（从左到右，同列则从上到下）。<br> 排序规则：优先按 x 坐标升序，x 相同时按 y 坐标升序。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>| 1 3 5 7 |</span></span>
<span class="line"><span>| 2 4 6 8 |</span></span></code></pre></div><h3 id="vertical" tabindex="-1"><code>Vertical</code> <a class="header-anchor" href="#vertical" aria-label="Permalink to &quot;`Vertical`&quot;">​</a></h3><p>按垂直方向排序（从上到下，同行则从左到右）。<br> 排序规则：优先按 y 坐标升序，y 相同时按 x 坐标升序。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>| 1 2 3 4 |</span></span>
<span class="line"><span>| 5 6 7 8 |</span></span></code></pre></div><h3 id="score" tabindex="-1"><code>Score</code> <a class="header-anchor" href="#score" aria-label="Permalink to &quot;`Score`&quot;">​</a></h3><p>按匹配得分降序排序。得分越高的结果排在越前面。<br> 适用于需要优先选择置信度最高结果的场景。</p><h3 id="area" tabindex="-1"><code>Area</code> <a class="header-anchor" href="#area" aria-label="Permalink to &quot;`Area`&quot;">​</a></h3><p>按识别框面积降序排序。面积越大的结果排在越前面。<br> 适用于 <code>FeatureMatch</code>、<code>ColorMatch</code>、<code>OCR</code>、<code>NeuralNetworkDetect</code> 算法。</p><h3 id="length" tabindex="-1"><code>Length</code> <a class="header-anchor" href="#length" aria-label="Permalink to &quot;`Length`&quot;">​</a></h3><p>按识别文本长度排序。仅适用于 <code>OCR</code> 算法。<br> 文本越长的结果排在越前面。</p><h3 id="random" tabindex="-1"><code>Random</code> <a class="header-anchor" href="#random" aria-label="Permalink to &quot;`Random`&quot;">​</a></h3><p>随机打乱结果顺序。<br> 适用于需要随机选择结果的场景。</p><h3 id="expected" tabindex="-1"><code>Expected</code> <a class="header-anchor" href="#expected" aria-label="Permalink to &quot;`Expected`&quot;">​</a></h3><p>按 <code>expected</code> 字段中指定的顺序排序。<br> 对于 <code>OCR</code>，按 <code>expected</code> 正则表达式列表的顺序排序，先匹配到的正则对应的结果排在前面。<br> 对于 <code>NeuralNetworkClassify</code> 和 <code>NeuralNetworkDetect</code>，按 <code>expected</code> 分类下标列表的顺序排序。<br> 未匹配到任何 expected 的结果将被排在最后。</p><h2 id="等待画面静止" tabindex="-1">等待画面静止 <a class="header-anchor" href="#等待画面静止" aria-label="Permalink to &quot;等待画面静止&quot;">​</a></h2><p>等待画面静止。需连续一定时间 画面 <strong>没有较大变化</strong> 才会退出动作。</p><p>字段值为 uint 或 object，举例：</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;pre_wait_freezes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;post_wait_freezes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // more properties ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>若值为 object，可设置部分额外字段：</p><ul><li><p><code>time</code>: <em>uint</em><br> 连续 <code>time</code> 毫秒 画面 <strong>没有较大变化</strong> 才会退出动作。可选，默认 1 。</p></li><li><p><code>target</code>: <em>true</em> | <em>string</em> | <em>array&lt;int, 2&gt;</em> | <em>array&lt;int, 4&gt;</em><br> 等待目标的位置。可选，默认 true。值同上述 <code>Click</code>.<code>target</code> 。</p></li><li><p><code>target_offset</code>: <em>array&lt;int, 4&gt;</em><br> 在 <code>target</code> 的基础上额外移动再作为等待目标，四个值分别相加。可选，默认 [0, 0, 0, 0] 。</p></li><li><p><code>threshold</code>: <em>double</em><br> 判断“没有较大变化”的模板匹配阈值。可选，默认 0.95 。</p></li><li><p><code>method</code>: <em>int</em><br> 判断“没有较大变化”的模板匹配算法，即 cv::TemplateMatchModes。可选，默认 5 。<br> 同 <code>TemplateMatch</code>.<code>method</code> 。</p></li><li><p><code>rate_limit</code>: <em>uint</em><br> 识别速率限制，单位毫秒。可选，默认 1000 。<br> 每次识别最低消耗 <code>rate_limit</code> 毫秒，不足的时间将会 sleep 等待。</p></li><li><p><code>timeout</code>: <em>uint</em><br> 识别超时时间，毫秒。可选，默认 20 * 1000 。</p></li></ul><h2 id="节点通知" tabindex="-1">节点通知 <a class="header-anchor" href="#节点通知" aria-label="Permalink to &quot;节点通知&quot;">​</a></h2><p>通过配置 <code>focus</code> 字段，可以让 UI 在节点执行的特定阶段向用户展示自定义消息。</p><h3 id="配置方式" tabindex="-1">配置方式 <a class="header-anchor" href="#配置方式" aria-label="Permalink to &quot;配置方式&quot;">​</a></h3><p>在节点中添加 <code>focus</code> 字段，键为消息类型，值为要展示的模板字符串，模板字符串支持文件路径、URL或直接文本，内容支持Markdown格式，支持国际化（以$开头）。模板中可使用 <code>{字段名}</code> 格式的占位符，UI 会自动替换为实际值。</p><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;NodeA&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;focus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Node.Recognition.Succeeded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{name} 识别命中，准备开始执行&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;Node.Action.Starting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{name} 开始执行，任务 ID: {task_id}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="可用的消息类型" tabindex="-1">可用的消息类型 <a class="header-anchor" href="#可用的消息类型" aria-label="Permalink to &quot;可用的消息类型&quot;">​</a></h3><table tabindex="0"><thead><tr><th>消息类型</th><th>触发时机</th><th>可用占位符</th></tr></thead><tbody><tr><td><code>Node.Recognition.Starting</code></td><td>识别开始</td><td><code>task_id</code>, <code>reco_id</code>, <code>name</code></td></tr><tr><td><code>Node.Recognition.Succeeded</code></td><td>识别成功</td><td><code>task_id</code>, <code>reco_id</code>, <code>name</code></td></tr><tr><td><code>Node.Recognition.Failed</code></td><td>识别失败</td><td><code>task_id</code>, <code>reco_id</code>, <code>name</code></td></tr><tr><td><code>Node.Action.Starting</code></td><td>动作开始</td><td><code>task_id</code>, <code>action_id</code>, <code>name</code></td></tr><tr><td><code>Node.Action.Succeeded</code></td><td>动作成功</td><td><code>task_id</code>, <code>action_id</code>, <code>name</code></td></tr><tr><td><code>Node.Action.Failed</code></td><td>动作失败</td><td><code>task_id</code>, <code>action_id</code>, <code>name</code></td></tr></tbody></table><h3 id="更多消息类型" tabindex="-1">更多消息类型 <a class="header-anchor" href="#更多消息类型" aria-label="Permalink to &quot;更多消息类型&quot;">​</a></h3><p>完整的回调消息列表和详细说明请参考 <a href="2.3-CallbackProtocol">回调协议</a> 和 <a href="https://github.com/MaaXYZ/MaaFramework/blob/main/include/MaaFramework/MaaMsg.h" target="_blank" rel="noopener noreferrer">MaaMsg.h</a>。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/docs/2.4-ControlMethods" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>控制方式说明</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/docs/3.2-ProjectInterface" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>ProjectInterface协议</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"community_projects.md\":\"0xtjJYpe\",\"docs_1.1-quickstarted.md\":\"Di1lXFLn\",\"docs_1.2-explanationofterms.md\":\"CPeye_o8\",\"docs_2.1-integration.md\":\"C8HiXf0M\",\"docs_2.2-integratedinterfaceoverview.md\":\"bVg7A8nj\",\"docs_2.3-callbackprotocol.md\":\"CrykSlbu\",\"docs_2.4-controlmethods.md\":\"B8E-HNX8\",\"docs_3.1-pipelineprotocol.md\":\"B5UV2DEr\",\"docs_3.2-projectinterface.md\":\"Bi14ev77\",\"docs_3.3-projectinterfacev2.md\":\"hyWfOtO_\",\"docs_4.1-buildguide.md\":\"VjjPA6eE\",\"docs_4.2-standardizedinterfacedesign.md\":\"BaoOEYsV\",\"docs_5.1-troubleshooting.md\":\"WSBWJU6W\",\"docs_nodejs_j1.1-quickstarted.md\":\"Bu9Nf8lV\",\"docs_nodejs_j1.2-custom recognition and action.md\":\"Du44gTfR\",\"docs_nodejs_j1.3-packaging.md\":\"DOJRlg6D\",\"en_community_projects.md\":\"SBs6fq4R\",\"en_docs_1.1-quickstarted.md\":\"CpeC36f8\",\"en_docs_1.2-explanationofterms.md\":\"D24SaIwZ\",\"en_docs_2.1-integration.md\":\"BE-pSQ1w\",\"en_docs_2.2-integratedinterfaceoverview.md\":\"DIMToK9s\",\"en_docs_2.3-callbackprotocol.md\":\"Bm3rDbZ_\",\"en_docs_2.4-controlmethods.md\":\"n_wi04Wr\",\"en_docs_3.1-pipelineprotocol.md\":\"CAZfk3Lz\",\"en_docs_3.2-projectinterface.md\":\"BzTqGZPD\",\"en_docs_3.3-projectinterfacev2.md\":\"B4vHFsyY\",\"en_docs_4.1-buildguide.md\":\"CdoPnw5w\",\"en_docs_4.2-standardizedinterfacedesign.md\":\"CqBpZ6F7\",\"en_docs_5.1-troubleshooting.md\":\"DHv1c2mN\",\"en_docs_nodejs_j1.1-quickstarted.md\":\"CNbIO_Ke\",\"en_docs_nodejs_j1.2-custom recognition and action.md\":\"Bf3vN1rY\",\"en_docs_nodejs_j1.3-packaging.md\":\"CHOAz37r\",\"en_index.md\":\"fr3v5Y1n\",\"index.md\":\"BTmXPm1Z\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-cn\",\"dir\":\"ltr\",\"title\":\"MaaFramework\",\"description\":\"基于图像识别的自动化黑盒测试框架\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/maafw.png\",\"search\":{\"provider\":\"local\"},\"outline\":{\"level\":[2,3]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/MaaXYZ/MaaFramework\"}]},\"locales\":{\"root\":{\"label\":\"简体中文\",\"lang\":\"zh-cn\",\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"文档\",\"activeMatch\":\"/docs/\",\"link\":\"/docs/1.1-QuickStarted\"},{\"text\":\"社区\",\"activeMatch\":\"/community/\",\"items\":[{\"text\":\"社区项目\",\"link\":\"/community/projects\"},{\"text\":\"友情链接\",\"items\":[{\"text\":\"MaaAssistantArknights\",\"link\":\"https://maa.plus\"}]}]},{\"text\":\"问 AI 🤖\",\"link\":\"https://deepwiki.com/MaaXYZ/MaaFramework\"}],\"sidebar\":[{\"text\":\"快速开始\",\"link\":\"/docs/1.1-QuickStarted\"},{\"text\":\"术语解释\",\"link\":\"/docs/1.2-ExplanationOfTerms\"},{\"text\":\"集成文档\",\"link\":\"/docs/2.1-Integration\"},{\"text\":\"集成接口一览\",\"link\":\"/docs/2.2-IntegratedInterfaceOverview\"},{\"text\":\"回调协议\",\"link\":\"/docs/2.3-CallbackProtocol\"},{\"text\":\"控制方式说明\",\"link\":\"/docs/2.4-ControlMethods\"},{\"text\":\"任务流水线协议\",\"link\":\"/docs/3.1-PipelineProtocol\"},{\"text\":\"ProjectInterface协议\",\"link\":\"/docs/3.2-ProjectInterface\"},{\"text\":\"ProjectInterfaceV2协议\",\"link\":\"/docs/3.3-ProjectInterfaceV2\"},{\"text\":\"构建指南\",\"link\":\"/docs/4.1-BuildGuide\"},{\"text\":\"标准化接口设计\",\"link\":\"/docs/4.2-StandardizedInterfaceDesign\"},{\"text\":\"问题反馈\",\"link\":\"/docs/5.1-Troubleshooting\"},{\"text\":\"NodeJS\",\"items\":[{\"text\":\"快速开始\",\"link\":\"/docs/NodeJS/J1.1-QuickStarted\"},{\"text\":\"自定义识别_操作\",\"link\":\"/docs/NodeJS/J1.2-Custom Recognition and Action\"},{\"text\":\"打包\",\"link\":\"/docs/NodeJS/J1.3-Packaging\"}]}]}},\"en\":{\"label\":\"English\",\"lang\":\"en-us\",\"link\":\"/en/\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/en\"},{\"text\":\"Docs\",\"activeMatch\":\"/en/docs/\",\"link\":\"/en/docs/1.1-QuickStarted\"},{\"text\":\"Community\",\"activeMatch\":\"/en/community/\",\"items\":[{\"text\":\"Projects\",\"link\":\"/en/community/projects\"},{\"text\":\"Links\",\"items\":[{\"text\":\"MaaAssistantArknights\",\"link\":\"https://maa.plus\"}]}]},{\"text\":\"Ask AI 🤖\",\"link\":\"https://deepwiki.com/MaaXYZ/MaaFramework\"}],\"sidebar\":[{\"text\":\"QuickStarted\",\"link\":\"/en/docs/1.1-QuickStarted\"},{\"text\":\"ExplanationOfTerms\",\"link\":\"/en/docs/1.2-ExplanationOfTerms\"},{\"text\":\"Integration\",\"link\":\"/en/docs/2.1-Integration\"},{\"text\":\"IntegratedInterfaceOverview\",\"link\":\"/en/docs/2.2-IntegratedInterfaceOverview\"},{\"text\":\"CallbackProtocol\",\"link\":\"/en/docs/2.3-CallbackProtocol\"},{\"text\":\"ControlMethods\",\"link\":\"/en/docs/2.4-ControlMethods\"},{\"text\":\"PipelineProtocol\",\"link\":\"/en/docs/3.1-PipelineProtocol\"},{\"text\":\"ProjectInterface\",\"link\":\"/en/docs/3.2-ProjectInterface\"},{\"text\":\"ProjectInterfaceV2\",\"link\":\"/en/docs/3.3-ProjectInterfaceV2\"},{\"text\":\"BuildGuide\",\"link\":\"/en/docs/4.1-BuildGuide\"},{\"text\":\"StandardizedInterfaceDesign\",\"link\":\"/en/docs/4.2-StandardizedInterfaceDesign\"},{\"text\":\"Troubleshooting\",\"link\":\"/en/docs/5.1-Troubleshooting\"},{\"text\":\"NodeJS\",\"items\":[{\"text\":\"QuickStarted\",\"link\":\"/en/docs/NodeJS/J1.1-QuickStarted\"},{\"text\":\"Custom Recognition and Action\",\"link\":\"/en/docs/NodeJS/J1.2-Custom Recognition and Action\"},{\"text\":\"Packaging\",\"link\":\"/en/docs/NodeJS/J1.3-Packaging\"}]}]}}},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>